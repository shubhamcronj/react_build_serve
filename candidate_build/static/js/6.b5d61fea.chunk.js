(this["webpackJsonpbirbal-candidate-app"]=this["webpackJsonpbirbal-candidate-app"]||[]).push([[6],{196:function(e,t,a){"use strict";a.r(t),a.d(t,"ReadQuestion",(function(){return h}));var n=a(46),s=a(47),i=a(64),r=a(63),o=a(0),c=a.n(o),l=(a(260),a(33)),d=a(15),u=a(247),m=a(13),p=a(28),h=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).remainingTimeHandler=function(e){return e},s.state={},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props&&this.props.responseId&&this.props.type&&this.props.question){var e={questionId:this.props.question.id,responseId:this.props.responseId,type:this.props.type,questionStatus:2};this.props.UserAction.updateResponse(e)}}},{key:"render",value:function(){return c.a.createElement("div",{className:"read-question-main"},c.a.createElement("div",{className:"read-question-heading"},"Live Interview"),c.a.createElement("div",{className:"read-question-body"},c.a.createElement("div",{className:"read-question-timer"},c.a.createElement(u.a,{durationTime:this.props.durationTime,className:"timer-new",nextBtn:!0,handleTimer:this.props.readQuestionTimerEnds,remainingTimeHandler:this.remainingTimeHandler,isPlaying:!0})),c.a.createElement("div",{className:"read-question-time-left"},"Time left to read the question"),c.a.createElement("div",{className:"read-question-ques-div"},c.a.createElement("div",{className:"read-question-time-left"},"Please Read Question / Prepare Answer"),c.a.createElement("div",{className:"ques-wrapper"},c.a.createElement("div",{className:"question-number"},"Q.",this.props.quesNo," "),c.a.createElement("div",{className:"question-text-new"},this.props.question.QuestionText," ")))))}}]),a}(o.Component);t.default=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(p.b)(m,e)}}))(Object(d.e)(h))},198:function(e,t,a){"use strict";a.r(t),a.d(t,"Interview",(function(){return M}));var n=a(9),s=a.n(n),i=a(80),r=a(46),o=a(47),c=a(64),l=a(63),d=a(0),u=a.n(d),m=a(33),p=a(236),h=(a(269),a(15)),v=a(28),g=a(13),f=a(247),b=a(282),w=a(270),S=a.n(w),k=a(253),E=a(250),N=a.n(E),R=a(712),y=a(246),I=a.n(y),C=a(196),T=a(195),D=a(251),q=parseInt("10")?parseInt("10"):10,x=parseInt("10")?parseInt("10"):10,A=0,O="",Q="",U="",j=0,P="",H="",M=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleStart=function(){n.clockRef.current.start()},n.handleTimeUpdate=function(e,t){n.state.time!=e&&n.setState({time:e,remainingTime:t})},n.handleNext=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,i,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.retake){e.next=17;break}return e.next=3,n.setState({restartTimer:!0,isPlaying:!0});case 3:return e.next=5,n.handleDownload(t);case 5:return a=[],t.map((function(e){a.push(e.id)})),n.getStepContent(t,n.state.activeStep),e.next=10,n.setState({activeStep:n.state.activeStep+1,showReadQuestion:!0,retakesAvailable:n.state.totalRetakes-1});case 10:if(j+=1,0,!(n.state.questionData.length>0)){e.next=17;break}return r=n.state.questionData[n.state.activeStep].Questionstime,i=Number(r),e.next=17,n.setState({timerInput:i});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleFinish=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.retake){e.next=9;break}return n.setState({submitClicked:!0}),e.next=4,n.handleDownload(t);case 4:a=[],t.map((function(e){a.push(e.id)})),[].push(n.getStepContent(n.state.activeStep)),n.props.submitClickedHandler();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePriorUpload=function(){var e=Object(i.a)(s.a.mark((function e(t,a,i){var r,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.state.skipable&&n.state.timerInput&&(n.setState({skipable:!1}),setTimeout((function(){n.setState({skipable:!0})}),1e3*(q+x))),(r=new FormData).append("video",t,a),P&&r.append("video",P,H),r.append("timeTaken",A),o={questionId:i[n.state.activeStep],responseId:n.state.responseId,type:"verbal",questionStatus:3,timeTaken:A},c=n.state.activeStep+1,"verbal",l={questionId:i[n.state.activeStep],responseId:n.state.responseId,type:"verbal",questionStatus:3,timeTaken:A,videoFile:t,videoFileName:a,screenFile:P,screenFileName:H},n.props.upload(r,o,l,c,"verbal"),n.setState({faceNotDetected:0});case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.handleStartCaptureClick=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);n.mediaRecorderRef&&(n.mediaRecorderRef.current=new MediaRecorder(n.webcamRef.current.stream,{mimeType:e?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm",audioBitsPerSecond:128e3,videoBitsPerSecond:625e3})),n.setState({capturing:!0},(function(){n.childRef.current.startCapture()})),P="",H="",n.mediaRecorderRef&&n.mediaRecorderRef.current&&"inactive"==n.mediaRecorderRef.current.state&&(n.mediaRecorderRef.current.start(),n.mediaRecorderRef.current.addEventListener("dataavailable",n.handleDataAvailable))},n.handleAbort=function(){n.mediaRecorderRef&&n.mediaRecorderRef.current&&"recording"==n.mediaRecorderRef.current.state&&(n.childRef.current.abortCapture(),n.mediaRecorderRef.current.stop(),n.mediaRecorderRef.current.addEventListener("stop",(function(){n.setState({recordedChunks:[]})})),n.setState({capturing:!1}),n.handleStartCaptureClick())},n.handleStopCaptureClick=function(){n.mediaRecorderRef&&n.mediaRecorderRef.current&&"recording"==n.mediaRecorderRef.current.state&&(n.mediaRecorderRef.current.stop(),n.setState({capturing:!1}))},n.handleDownload=function(e){var t=[];if(e.map((function(e){t.push(e.id)})),n.state.recordedChunks.length){var a=new Blob(n.state.recordedChunks,{type:"video/webm"}),s=URL.createObjectURL(a),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=s,window.URL.revokeObjectURL(s),n.setState({recordedChunks:[]});var r=new File([a],"".concat(n.state.ScheduleId,"-").concat(n.state.CandidateId,"-").concat(n.state.timedate,"-").concat(n.state.activeStep,".mp4")),o="".concat(n.state.ScheduleId,"-").concat(n.state.CandidateId,"-").concat(n.state.timedate,"-").concat(n.state.activeStep,".mp4");n.setState({videofilename:o}),n.handlePriorUpload(r,"".concat(n.state.ScheduleId,"-").concat(n.state.CandidateId,"-").concat(n.state.timedate,"-").concat(n.state.activeStep,".mp4"),t)}},n.handleDataAvailable=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.data).size>0)){e.next=6;break}return e.next=4,n.setState({recordedChunks:n.state.recordedChunks.concat(a)});case 4:A=n.state.timerInput-n.state.remainingTime,n.state.activeStep==n.state.questionData.length-1?n.handleFinish(n.state.questionData):n.handleNext(n.state.questionData);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleTimer=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({restartTimer:!1,showDialog:!1,retake:!1,isPlaying:!1});case 2:setTimeout((function(){n.handleStopCaptureClick(t)}),2e3),n.childRef.current.stopCapture();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.capture=function(){var e=n.webcamRef&&n.webcamRef.current&&n.webcamRef.current.getScreenshot(),t=e&&e.substring("data:image/jpeg;base64".length+1)?e.substring("data:image/jpeg;base64".length+1):null;n.setState({screenShot:t}),n.props.UserAction.verifyScreenshot({base64:t})},n.readQuestionTimerEnds=function(){n.setState({showReadQuestion:!1})},n.retakeHandler=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.state.retakesAvailable&&n.state.retakesAvailable>0)){e.next=8;break}return e.next=3,n.setState({retakesAvailable:n.state.retakesAvailable-1,showRetakeDialog:!1,restartTimer:!0,retake:!0,showDialog:!1});case 3:t={questionId:n.state.questionData[n.state.activeStep].id,responseId:n.state.responseId,type:"verbal",questionStatus:2},n.props.UserAction.updateResponse(t),n.handleAbort(),n.setState({restartTimer:!1}),n.state.skipable&&n.state.timerInput&&!n.state.showReadQuestion&&(n.setState({skipable:!1}),setTimeout((function(){n.setState({skipable:!0})}),1e3*q));case 8:case"end":return e.stop()}}),e)}))),n.retakeClicked=function(){n.state.totalRetakes-n.state.retakesAvailable!=n.state.totalRetakes&&n.state.totalRetakes-n.state.retakesAvailable>0&&n.setState({showRetakeDialog:!0})},n.handleEarlySubmit=function(){n.state.skipable&&n.state.retakesAvailable&&n.state.retakesAvailable>0?n.setState({showDialog:!0}):n.state.skipable&&n.handleTimer(n.state.questionData)},n.handleTimerEnd=function(){n.state.retakesAvailable&&n.state.retakesAvailable>0?n.setState({showDialog:!0}):n.handleTimer(n.state.questionData)},n.clockRef=u.a.createRef(),n.mediaRecorderRef=u.a.createRef(),n.timer=0,n.state={restartTimer:!1,audioNew:null,ques:[],capturing:!1,activeStep:0,audio:!1,video:!1,recordedChunks:[],question:[],questions:[],videofilename:"",isDataArrived:!0,questionData:[],submitClicked:!1,faceNotDetected:0,submittedQuestions:[],totalQuestions:0,submissionQueue:[],responseId:"",noOfRetakes:0,showDialog:!1,showReadQuestion:!1,totalRetakes:0,retakesAvailable:0,retake:!1,showRetakeDialog:!1,remainingTime:0,isPlaying:!0,skipable:!1,ScheduleId:"",CandidateId:"",timerInput:0,time:""},n.vid=u.a.createRef(),n.audio=u.a.createRef(),n.webcamRef=u.a.createRef(),n.childRef=u.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,i,r,o,c,l,d,u,m,p=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props||!this.props.data){e.next=16;break}return t=this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response,a=t.id,n=t.candidateId,i=t.scheduleId,e.next=4,this.setState({responseId:a,ScheduleId:i,CandidateId:n});case 4:if(O=i,Q=n,r=[],this.props.data&&this.props.data.verbalQuestions&&this.props.data.verbalQuestions.map((function(e){r.push({id:e.id,QuestionText:e.text,Questionstime:e.suggestedDuration})})),this.setState({questionData:r,totalQuestions:r.length,showReadQuestion:!0}),0,!(r.length>0)){e.next=15;break}return c=r[this.state.activeStep].Questionstime,o=Number(c),e.next=15,this.setState({timerInput:o});case 15:this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response&&this.props.data.data.response.questionType&&this.props.data.data.response.questionType.length>0&&this.props.data.data.response.questionType.map((function(e){"verbal"==e.name.toLowerCase()&&(e.retake&&p.setState({totalRetakes:e.retake,retakesAvailable:e.retake-1}),e.skipable&&p.state.timerInput&&setTimeout((function(){p.setState({skipable:!0})}),1e3*(q+x)))}));case 16:this.getMicrophone(),l=new Date,d=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate(),u=l.getHours()+"-"+l.getMinutes()+"-"+l.getSeconds(),m=d+"-"+u,this.setState({timedate:m}),U=m;case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMicrophone",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,this.setState({audioNew:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepContent",value:function(e,t){if(e.length>0){var a=[];e.map((function(e){a.push(e.QuestionText)}));var n=a[this.state.activeStep];switch(this.state.activeStep){case this.state.activeStep:return u.a.createElement("div",null,u.a.createElement("div",{className:"question-text"},"Q",this.state.activeStep+1,". ",n));default:return"Unknown stepIndex"}}}},{key:"onScreenAccess",value:function(){console.log("got Screen access")}},{key:"onRecordStart",value:function(){console.log("started recording")}},{key:"onRecordStop",value:function(){console.log("stopped recording")}},{key:"onUserStop",value:function(){console.log("user stopped screen access"),P="",H=""}},{key:"onVideoFile",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=new File([t],"$".concat(O,"-").concat(Q,"-").concat(U,"-").concat(j,".mp4")),n="".concat(O,"-").concat(Q,"-").concat(U,"-").concat(j,"Screen.mp4"),P=a,H=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){console.log("recieved abort callback")}},{key:"render",value:function(){var e=this,t=this.state.questionData;localStorage.setItem("questiondata",JSON.stringify(t));var a=JSON.parse(localStorage.getItem("questiondata")),n=[],s=[];a.map((function(e){n.push(parseInt(e.Questionstime)),s.push(1e4)}));for(var i=[],r=1;r<=t.length;r++)i.push(r);return u.a.createElement("div",null,u.a.createElement(D.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,onRecordStart:this.onRecordStart,onRecordStop:this.onRecordStop,onVideoFile:this.onVideoFile,onAbort:this.onAbort}),localStorage.getItem("login")&&localStorage.getItem("preview")?this.state.showReadQuestion?u.a.createElement(C.default,{durationTime:x,question:this.state.questionData[this.state.activeStep],quesNo:this.state.activeStep+1,responseId:this.state.responseId,type:"verbal",readQuestionTimerEnds:this.readQuestionTimerEnds}):u.a.createElement("div",{className:"interview-main-div"},u.a.createElement(R.a,{className:"first-dialog-submit",open:this.state.showDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.a.createElement("div",{className:"main-dialog-heading"},"Do you want to retake or submit?"),u.a.createElement("div",{className:"main-dialog-sub-heading"},"You have ",this.state.retakesAvailable," retakes left."),u.a.createElement("div",{className:"main-dialog-buttons-wrapper"},u.a.createElement("div",{className:"dialog-retry-button",onClick:this.retakeHandler},"Retake"),u.a.createElement("div",{className:"dialog-submit-button",onClick:this.handleTimer},"Submit"))),u.a.createElement(R.a,{className:"first-dialog-submit",open:this.state.showRetakeDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.a.createElement("div",{className:"main-dialog-heading"},"Are you sure you want to retake?"),u.a.createElement("div",{className:"main-dialog-sub-heading"},"You have ",this.state.retakesAvailable," retakes left."),u.a.createElement("div",{className:"main-dialog-buttons-wrapper"},u.a.createElement("div",{className:"dialog-retry-button",onClick:function(){e.setState({showRetakeDialog:!1})}},"No"),u.a.createElement("div",{className:"dialog-submit-button",onClick:this.retakeHandler},"Yes"))),u.a.createElement("div",{className:"interview-row-wrapper"},u.a.createElement("div",{className:"Inter-1"},window.screen.width>1024?u.a.createElement("div",{className:"previews-heading"},u.a.createElement(b.a,null,"Live Interview")):null,window.screen.width>1024?u.a.createElement("div",{className:"previews-subHeading1"}):null),u.a.createElement("div",{className:"inter-2 total-questions"},u.a.createElement("div",null,u.a.createElement("div",{className:"questions-wrapper"},u.a.createElement("div",{className:"total"}," Total Questions"),u.a.createElement("div",{className:"circle-interview"},this.state.activeStep+1,"/",t.length))))),u.a.createElement("div",{class:"fluid-container"},u.a.createElement("div",{className:"interview-row-wrapper-new"},u.a.createElement("div",{className:"left-interview"},u.a.createElement("div",{className:"video-div"},u.a.createElement("div",{className:"interview-video-new"},u.a.createElement(T.default,{handleStartCaptureClick:this.handleStartCaptureClick,handleAbort:this.handleAbort,handleDataAvailable:this.handleDataAvailable,handleStopCaptureClick:this.handleStopCaptureClick,capturing:this.state.capturing,webcamRef:this.webcamRef,recordedChunks:this.state.recordedChunks,handleDownload:this.handleDownload}),u.a.createElement("div",{className:"bottom-video-div"},u.a.createElement("div",{className:"retake-button-div"},u.a.createElement("div",{className:this.state.totalRetakes&&this.state.totalRetakes-this.state.retakesAvailable!=this.state.totalRetakes?"retake-button":"retake-disabled-button",onClick:this.retakeClicked},u.a.createElement("span",null,u.a.createElement(S.a,{style:{height:"20px",width:"20px",margin:"0 5px"}})),"Retake"," ",this.state.totalRetakes?u.a.createElement("span",null,"  ",this.state.totalRetakes-this.state.retakesAvailable," ","/ ",this.state.totalRetakes):"")),u.a.createElement("div",{className:"timer-button-div"},u.a.createElement("div",{className:"timer-button"},u.a.createElement(f.a,{durationTime:this.state.timerInput,handleTimer:function(){console.log("handle")},isPlaying:!0,className:"timer-2",onTick:function(t,a){e.handleTimeUpdate(t,a)}}),this.state.time)),u.a.createElement("div",{className:"audio-analyser-div"},u.a.createElement("div",{className:"audio-img"}," ",u.a.createElement("img",{src:N.a})," "),this.state.audioNew?u.a.createElement("div",null," ",u.a.createElement(k.a,{audio:this.state.audioNew})," "):null),u.a.createElement("div",{className:"submit-button-div"},u.a.createElement("div",{className:this.state.skipable?"submit-button":"submit-button-disabled",onClick:this.handleEarlySubmit},"Submit"))),u.a.createElement("div",{className:"total-questions-new"},u.a.createElement("div",null,u.a.createElement("div",{className:"questions-wrapper"},u.a.createElement("div",{className:"total"},"Total Questions"),u.a.createElement("div",{className:"circle-interview"},this.state.activeStep+1,"/",t.length))),0!==this.state.timerInput&&window.screen.width<=1024&&u.a.createElement(f.a,{durationTime:this.state.timerInput,disableBtn:this.state.restartTimer,remainingTimeHandler:this.remainingTimeHandler,handleTimer:function(){e.handleTimerEnd()},isPlaying:this.state.isPlaying,className:"timer-2",onTick:function(t,a){e.handleTimeUpdate(t,a)}}))))),u.a.createElement("div",{className:"right-interview"},u.a.createElement("div",{className:"question-div"},0!==this.state.timerInput&&window.screen.width>1024&&u.a.createElement(f.a,{durationTime:this.state.timerInput,remainingTimeHandler:this.remainingTimeHandler,disableBtn:this.state.restartTimer,handleTimer:function(){e.handleTimerEnd()},isPlaying:this.state.isPlaying,className:"timer-1"}),u.a.createElement("div",{className:"content-div"},u.a.createElement("div",{className:"qustion-content-div"},this.state.activeStep===i.length?u.a.createElement("div",null):u.a.createElement("div",null,u.a.createElement("span",{className:"laptop-only",style:{display:"flex",fontSize:"12px",marginLeft:"20px"}},"Read your question"),u.a.createElement("div",{className:"question"},u.a.createElement("div",null,this.getStepContent(t,this.state.activeStep))))),u.a.createElement("div",{className:"buttons-wrapper"},u.a.createElement(p.a,{variant:"contained",className:this.state.skipable?"Button-next":"Button-next-disabled",onClick:this.handleEarlySubmit},u.a.createElement("span",null,"Next Question"),u.a.createElement("span",null,u.a.createElement(I.a,{style:{height:"15px",width:"15px"}}))),u.a.createElement(p.a,{variant:"contained",className:"Button-retry",onClick:this.retakeClicked},u.a.createElement("span",null,"Retake"),u.a.createElement("span",null,u.a.createElement(S.a,{style:{height:"15px",width:"15px"}}))))))))),u.a.createElement("div",{style:{display:"flex",justifyContent:"end",marginRight:"30px",marginTop:"20px"},className:"interview-logo"})):u.a.createElement("div",null,"Access Blocked"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e&&e.UserReducer&&e.UserReducer.isScreenShotDataArrived&&e.UserReducer.screenShot&&e.UserReducer.screenShot.data&&(e.UserReducer.isScreenShotDataArrived=!1,e.UserReducer.screenShot.data.faces||(t.faceNotDetected=t.faceNotDetected+1)),t}}]),a}(d.Component);t.default=Object(m.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(v.b)(g,e)}}))(Object(h.e)(M))},199:function(e,t,a){"use strict";a.r(t),a.d(t,"Submitting",(function(){return g}));var n=a(46),s=a(47),i=a(64),r=a(63),o=a(0),c=a.n(o),l=(a(271),a(33)),d=a(272),u=a.n(d),m=a(13),p=a(15),h=a(28),v=a(667),g=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:!1},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},window.addEventListener("beforeunload",this.keepOnPage),setTimeout((function(){e.setState({show:!0})}),1e3)}},{key:"componentDidUnmount",value:function(){window.onbeforeunload=null}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.keepOnPage)}},{key:"keepOnPage",value:function(e){var t="Warning!\n\nNavigating away from this page will clear your response.";return e.returnValue=t,t}},{key:"render",value:function(){return console.log("insideee submitting"),c.a.createElement("div",{className:"submitting-main"},c.a.createElement("div",{className:"submitting-gif"},c.a.createElement("img",{src:u.a})),c.a.createElement("div",{className:"submitting-text"},"Submitting ",c.a.createElement("span",{style:{color:"#04724d"}}," ",this.props.submittedQuestions&&this.props.totalQuestions&&this.props.submittedQuestions.length==this.props.totalQuestions?this.props.totalQuestions:this.props.submittedQuestions.length+1)," of ",this.props.totalQuestions,", Please Wait...",c.a.createElement("div",{style:{padding:"20px",transform:"rotate(180deg)"}},this.props.progress&&this.props.progress>0&&this.state.show?c.a.createElement(v.a,{className:"linearProgressInternetLanding",variant:"determinate",value:this.props.progress,style:{backgroundColor:"#fff",borderRadius:"15px",height:"5px"}}):null),this.state.show?c.a.createElement("div",{style:{fontSize:"13px",textAlign:"center"}},"Uploading ",this.props.progress&&this.props.progress.toFixed(1),"%..."):null))}}]),a}(o.Component);t.default=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(h.b)(m,e)}}))(Object(p.e)(g))},200:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a.n(n),i=a(80),r=a(46),o=a(47),c=a(64),l=a(63),d=a(0),u=a.n(d),m=(a(273),a(247)),p=a(13),h=a(28),v=a(33),g=a(693),f=a(236),b=a(246),w=a.n(b),S=a(195),k=a(253),E=a(250),N=a.n(E),R=a(251),y=parseInt("10")?parseInt("10"):5,I=0,C=0,T="",D="",q="",x=0,A="",O="",Q=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).changeOption=function(e,t){var a=n.state,s=a.options,i=a.isMultiCheck;s&&s.length>0&&s.map((function(e,a){i?e.label===t&&(s[a].value=!0):e.label===t?s[a].value=!0:s[a].value=!1})),n.setState({options:s})},n.handleStartCaptureClick=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t={questionId:n.state.currentData.id,responseId:n.state.responseId,type:"mcq",questionStatus:2};n.props.UserAction.updateResponse(t),n.mediaRecorderRef&&(n.mediaRecorderRef.current=new MediaRecorder(n.webcamRef.current.stream,{mimeType:e?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm",audioBitsPerSecond:128e3,videoBitsPerSecond:625e3})),n.setState({capturing:!0},(function(){n.childRef.current.startCapture()})),A="",O="",n.mediaRecorderRef&&n.mediaRecorderRef.current&&"inactive"==n.mediaRecorderRef.current.state&&(n.mediaRecorderRef.current.start(),n.mediaRecorderRef.current.addEventListener("dataavailable",n.handleDataAvailable))},n.handleDataAvailable=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.data).size>0)){e.next=6;break}return I=C-n.state.remainingTime,e.next=5,n.setState({recordedChunks:n.state.recordedChunks.concat(a)});case 5:n.state.current===n.state.totalLength?n.handleFinish(n.state.McqData):n.handleNext(n.state.McqData);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleFinish=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({submitClicked:!0}),e.next=3,n.handleDownload(t);case 3:a=[],t.map((function(e){a.push(e.id)})),[].push(n.getStepContent(n.state.current)),n.props.submitClickedHandler();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleNext=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,i,r,o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({restartTimer:!0,isPlaying:!0});case 2:return e.next=4,n.handleDownload(t);case 4:a=[],t.map((function(e){a.push(e.id)})),n.handleStartCaptureClick(),n.getStepContent(t,n.state.current),i=n.state,r=i.totalLength,o=i.current,c=i.McqData,o<r&&c&&c[o]&&(l=c[o].metadata&&c[o].metadata.option&&c[o].metadata.option.length>0&&c[o].metadata.option.map((function(e){return{label:e.text,value:!1}})),n.setState({current:o+1,currentData:c[o],options:l,disablebtn:!0}),x=o+1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleStopCaptureClick=function(){n.mediaRecorderRef&&n.mediaRecorderRef.current&&"recording"==n.mediaRecorderRef.current.state&&(n.mediaRecorderRef.current.stop(),n.setState({capturing:!1}))},n.handleDownload=function(e){var t=[];if(e.map((function(e){t.push(e.id)})),n.state.recordedChunks.length){var a=new Blob(n.state.recordedChunks,{type:"video/webm"}),s=URL.createObjectURL(a),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=s,window.URL.revokeObjectURL(s),n.setState({recordedChunks:[]});var r=new File([a],"".concat(n.state.ScheduleId,"-").concat(n.state.CandidateId,"-").concat(n.state.timedate,"-").concat(n.state.current,".mp4")),o="".concat(n.state.ScheduleId,"-").concat(n.state.CandidateId,"-").concat(n.state.timedate,"-").concat(n.state.current,".mp4");n.setState({videofilename:o}),n.handlePriorUpload(r,"".concat(n.state.ScheduleId,"-").concat(n.state.CandidateId,"-").concat(n.state.timedate,"-").concat(n.state.current,".mp4"),t)}},n.handlePriorUpload=function(){var e=Object(i.a)(s.a.mark((function e(t,a,i){var r,o,c,l,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.state.disablebtn?setTimeout((function(){n.setState({disablebtn:!1})}),1e3*y):(n.setState({disablebtn:!0}),setTimeout((function(){n.setState({disablebtn:!1})}),1e3*y)),r=n.state.options,o="No option Selected",r&&r.length>0&&r.map((function(e){e.value&&(o=e.label)})),c=new FormData,A&&c.append("video",A,O),c.append("video",t,a),c.append("timeTaken",I),c.append("chosenOption",o),l={questionId:n.state.currentData.id,responseId:n.state.responseId,type:"mcq",questionStatus:3,chosenOption:o,timeTaken:I},d=n.state.current,"mcq",u={questionId:n.state.currentData.id,responseId:n.state.responseId,type:"mcq",questionStatus:3,chosenOption:o,timeTaken:I,videoFile:t,videoFileName:a,screenFile:A,screenFileName:O},n.props.upload(c,l,u,d,"mcq"),n.setState({faceNotDetected:0});case 15:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.handleTimer=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({restartTimer:!1,isPlaying:!1,disablebtn:!0});case 2:setTimeout((function(){n.handleStopCaptureClick()}),2e3),n.childRef.current.stopCapture();case 4:case"end":return e.stop()}}),e)}))),n.handleTimeUpdate=function(e,t){n.state.time!=e&&n.setState({time:e,remainingTime:t})},n.clockRef=u.a.createRef(),n.mediaRecorderRef=u.a.createRef(),n.timer=0,n.state={capturing:!1,recordedChunks:[],videofilename:"",submitClicked:!1,faceNotDetected:0,responseId:"",ScheduleId:"",CandidateId:"",timedate:(new Date).toISOString(),remainingTime:0,McqData:[],totalLength:0,current:0,currentData:null,options:null,disablebtn:!0,restartTimer:!1,isPlaying:!0,audio:!1,audioNew:null,isMultiCheck:!1,isSkipped:0,time:""},n.vid=u.a.createRef(),n.audio=u.a.createRef(),n.webcamRef=u.a.createRef(),n.childRef=u.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;q=this.state.timedate;var t=this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response,a=t.questionType,n=t.id,s=t.candidateId,i=t.scheduleId,r=a&&a.length>0&&a.find((function(e){return e.name&&"mcq"===e.name.toLowerCase()})),o=this.props&&this.props.data,c=o&&o.mcqQuestions,l=n,d=0,u=c&&c[0]&&c[0].metadata&&c[0].metadata.option&&c[0].metadata.option.length>0&&c[0].metadata.option.map((function(e){return d=e.correct?d+1:d,{label:e.text,value:!1}}));this.setState({McqData:c,totalLength:c.length,current:1,currentData:c[0],options:u,responseId:l,isMultiCheck:d>1,isSkipped:r&&r.skipable?r.skipable:0,ScheduleId:i,CandidateId:s}),x=1,T=i,D=s;var m=r&&r.skipable?r.skipable:0;(m=m?1e3*y:0)&&setTimeout((function(){e.setState({disablebtn:!1})}),m),this.getMicrophone()}},{key:"getMicrophone",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,this.setState({audioNew:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepContent",value:function(e,t){if(e.length>0){var a=[];e.map((function(e){a.push(e.QuestionText)}));var n=a[this.state.current];switch(this.state.activeStep){case this.state.activeStep:return u.a.createElement("div",null,u.a.createElement("div",{className:"question-text"},"Q",this.state.activeStep+1,". ",n));default:return"Unknown stepIndex"}}}},{key:"onScreenAccess",value:function(){console.log("got Screen access")}},{key:"onRecordStart",value:function(){console.log("started recording")}},{key:"onRecordStop",value:function(){console.log("stopped recording")}},{key:"onUserStop",value:function(){console.log("user stopped screen access"),A="",O=""}},{key:"onVideoFile",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=new File([t],"$".concat(T,"-").concat(D,"-").concat(q,"-").concat(x,".mp4")),n="".concat(T,"-").concat(D,"-").concat(q,"-").concat(x,"Screen.mp4"),A=a,O=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){console.log("recieved abort callback")}},{key:"render",value:function(){var e=this,t=this.state,a=t.disablebtn,n=t.current,s=t.currentData,i=t.options,r=t.restartTimer,o=t.isPlaying,c=s&&s.suggestedDuration?s.suggestedDuration:0;C=c;var l=10;return i&&i.length>0&&i.map((function(e){14*e.label.length>l&&(l=14*e.label.length+60)})),u.a.createElement("div",{className:"InterViewMcqMain"},u.a.createElement(R.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,onRecordStart:this.onRecordStart,onRecordStop:this.onRecordStop,onVideoFile:this.onVideoFile,onAbort:this.onAbort}),u.a.createElement("div",{className:"McqHeadingMain"},"Live Interview"),u.a.createElement("div",{className:"McqQuestionArea"},u.a.createElement("div",{className:"QuestionNumber"},"Q.",n),u.a.createElement("div",{className:"QuestionArea"},u.a.createElement("div",{className:"QuestionText",dangerouslySetInnerHTML:{__html:s&&s.text}}),u.a.createElement("div",{className:"QuestionOptions",style:{display:l>360?"flex":"block",flexWrap:"wrap"}},i&&i.length>0&&i.map((function(t){return u.a.createElement("div",{className:"OptionArea",style:{width:l<360?"".concat(l,"px"):"360px"}},u.a.createElement(g.a,{className:"checkbox",checked:t.value,onChange:function(a){return e.changeOption(a,t.label)},label:t.label}),u.a.createElement("span",{className:"textLabel"},t.label))})))),u.a.createElement("div",{className:"VideoArea"},u.a.createElement("div",{className:"Timer"},c?u.a.createElement(m.a,{durationTime:c,className:"timer-new",isPlaying:o,disableBtn:r,nextBtn:!0,handleTimer:this.handleTimer,remainingTimeHandler:this.remainingTimeHandler,onTick:function(t,a){e.handleTimeUpdate(t,a)}}):null),u.a.createElement("div",{className:"VideoRecord"}," ",u.a.createElement(S.default,{handleStartCaptureClick:this.handleStartCaptureClick,handleDataAvailable:this.handleDataAvailable,handleStopCaptureClick:this.handleStopCaptureClick,capturing:this.state.capturing,webcamRef:this.webcamRef,recordedChunks:this.state.recordedChunks,handleDownload:this.handleDownload}),u.a.createElement("div",{className:"audioDiv"},u.a.createElement("div",{className:"audio-img"},u.a.createElement("img",{src:N.a})," "),this.state.audioNew?u.a.createElement("div",{className:"audio-analyser"},u.a.createElement(k.a,{audio:this.state.audioNew})):null)),u.a.createElement("div",{className:"NextBtn"},u.a.createElement(f.a,{disabled:a,variant:"contained",className:"Button-next ".concat(a?"disabled":"normal"),onClick:this.handleTimer},u.a.createElement("span",null,"Next Question"),u.a.createElement("span",null,u.a.createElement(w.a,{style:{height:"15px",width:"15px"}})))))))}}]),a}(d.Component);t.default=Object(v.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(h.b)(p,e)}}))(Q)},210:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(9),i=a.n(s),r=a(80),o=a(46),c=a(47),l=a(90),d=a(64),u=a(63),m=a(0),p=a.n(m),h=a(27),v=(a(198),a(199)),g=a(15),f=a(28),b=a(13),w=a(33),S=(a(32),a(23)),k=a(91),E=a(200),N=a(282),R=(a(274),a(259)),y=a.n(R);function I(e){var t=Math.floor(e/3600);e%=3600;var a=Math.floor(e/60),n=Math.floor(e%60);return t<10&&0!=t&&(t="0".concat(t)),0==t&&(t="00"),a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),t+":"+a+":"+n}var C=a(236),T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Verbal Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(N.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(N.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:y.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : Verbal"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",I(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(C.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var D=Object(w.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(T),q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Verbal Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(N.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(N.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:y.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : MCQ"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",I(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(C.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var x=Object(w.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(q),A=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Coding Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(N.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(N.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:y.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : Coding"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",I(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(C.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var O=Object(w.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(A),Q=a(712),U=a(268),j=a.n(U),P=(a(669),a(664)),H=a(203),M=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,F=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,M.open("elephantFiles",2));F.onsuccess=function(e){e.target.result.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}},F.onupgradeneeded=function(e){e.target.result.createObjectStore("videoAnswers",{keyPath:"questionId"})};var L=3,B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={submitClicked:!1,submittedQuestions:[],totalQuestions:0,progress:0,submissionInProgress:!1,submissionQueue:[],currentQuestion:"",data:null,totalMcq:0,totalVerbal:0,totalCoding:0,mcqQuestions:[],sequenceOrder:"",verbalQuestions:[],verbalNew:!1,mcqNew:!1,codingNew:!1,suggestedVerbalDuration:0,suggestedCodingDuration:0,showDialog:!1,order:[]},e.submitClickedHandler=function(){e.setState({submitClicked:!0,progress:0})},e.totalQuestionsHandler=function(t){e.setState({totalQuestions:t})},e.addToQueue=function(t,a){var n=e.state.submissionQueue;n.push(t),e.setState({submissionQueue:n,currentQuestion:a.quesNo}),e.callSubmitApi()},e.callSubmitApi=function(){var t=Object(l.a)(e),a=e.state.submissionQueue;if(a.length>0&&0==e.state.submissionInProgress){e.setState({submissionInProgress:!0});var n=a.shift();t.setState({submissionQueue:a}),L-=1;var s=n.formdata,o=n.payload;localStorage.setItem("questionId",n.payload.questionId),localStorage.setItem("questionStatus",n.payload.questionStatus),localStorage.setItem("type",n.payload.type);var c=new XMLHttpRequest;c.timeout=6e5,c.upload.addEventListener("progress",(function(e){var a=e.loaded/e.total*100;t.props.UserAction.addsingleanswerProgress({progress:a})}),!1),c.addEventListener("load",function(){var e=Object(r.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!=a.target.status){e.next=4;break}t.props.UserAction.addsingleanswerSuccess(JSON.parse(a.target.responseText)),e.next=14;break;case 4:if(!L){e.next=12;break}return(s=t.state.submissionQueue).unshift(n),e.next=9,t.setState({submissionQueue:s,submissionInProgress:!1,showDialog:!0});case 9:t.callSubmitApi(),e.next=14;break;case 12:t.props.UserAction.addsingleanswerError({singleAnswerError:!0}),setTimeout((function(){t.setState({showDialog:!1})}),2e3);case 14:t.setState({progress:0}),t.callSubmitApi();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),c.addEventListener("error",function(){var e=Object(r.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=8;break}return(s=t.state.submissionQueue).unshift(n),e.next=5,t.setState({submissionQueue:s,submissionInProgress:!1,showDialog:!0});case 5:t.callSubmitApi(),e.next=10;break;case 8:t.props.UserAction.addsingleanswerError({singleAnswerError:!0}),setTimeout((function(){t.setState({showDialog:!1})}),2e3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),c.addEventListener("abort",(function(e){}),!1),c.open("PATCH","".concat(S.a,"/response/submission?responseId=").concat(o.responseId,"&questionId=").concat(o.questionId,"&questionStatus=").concat(o.questionStatus,"&type=").concat(o.type)),c.setRequestHeader("Authorization",localStorage.getItem("tokenNew")),c.send(s)}else e.setState({submissionInProgress:!1})},e.upload=function(){var t=Object(r.a)(i.a.mark((function t(a,n,s,r,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("insideee upload"),e.addToQueue({formdata:a,payload:n},{no:r,type:o}),e.decreaseCountHandler(o),M.open("elephantFiles",2).onsuccess=function(e){var t=e.target.result;t.transaction(["videoAnswers"],"readwrite").objectStore("videoAnswers",{keyPath:"questionId"}).add(s),t.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}};case 5:case"end":return t.stop()}}),t)})));return function(e,a,n,s,i){return t.apply(this,arguments)}}(),e.changeSequence=function(t){var a=e.state.order,n=a&&a.length>0&&a.findIndex((function(e){return e===t}));-1===n&&n===a.length-1||setTimeout((function(){e.setState({sequenceOrder:a[n+1]})}),2e3)},e.decreaseCountHandler=function(t){"verbal"===t?e.setState({totalVerbal:e.state.totalVerbal-1}):"coding"===t?e.setState({totalCoding:e.state.totalCoding-1}):e.setState({totalMcq:e.state.totalMcq-1})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},window.addEventListener("beforeunload",this.keepOnPage),k.a.pageview(window.location.pathname);var e=this.props.history&&this.props.history.location&&this.props.history.location.state,t=e&&e.totalMcq,a=e&&e.totalVerbal,s=e&&e.totalCoding,i=e&&e.data&&e.data.newResponse,r=0,o=0,c=0,l=0,d=0,u=0;if(e){var m=(e&&e.data).response,p=e.verbalQuestions,h=e.mcqQuestions,v=e.codingQuestions;r=m&&m.verbalQuestions&&m.verbalQuestions.length,o=m&&m.mcqQuestions&&m.mcqQuestions.length,c=m&&m.codingQuestions&&m.codingQuestions.length,p&&p.length>0&&p.map((function(e){l+=e.suggestedDuration})),h&&h.length>0&&h.map((function(e){u+=e.suggestedDuration})),v&&v.length>0&&v.map((function(e){d+=e.suggestedDuration}))}this.setState(Object(n.a)(Object(n.a)({},e),{},{totalQuestions:t+a+s,verbalNew:!!i||r===a,mcqNew:!!i||o===t,codingNew:!!i||c===s,suggestedMcqDuration:u,suggestedVerbalDuration:l,suggestedCodingDuration:d,order:e&&e.order}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.keepOnPage)}},{key:"keepOnPage",value:function(e){var t="Warning!\n\nNavigating away from this page will clear your response.";return e.returnValue=t,t}},{key:"render",value:function(){var e=this,t=this.state,a=t.sequenceOrder,n=t.totalMcq,s=t.totalVerbal,i=t.totalCoding,r=t.submitClicked,o=(t.totalQuestions,t.submittedQuestions,t.progress,t.verbalNew),c=t.mcqNew,l=t.codingNew,d=t.suggestedMcqDuration,u=t.suggestedVerbalDuration,m=t.suggestedCodingDuration;t.order;return p.a.createElement("div",{className:"main-parent"},p.a.createElement(Q.a,{className:"warning-dialog-submit",open:this.state.showDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement("div",{className:"warning-dialog-main"},p.a.createElement("div",{className:"unstable-image"},p.a.createElement("img",{src:j.a})),p.a.createElement("div",{className:"warning-dialog-heading"},"Failed to submit response, Being retried"))),r&&n<1&&s<1&&i<1?p.a.createElement(v.default,{progress:this.state.progress,submittedQuestions:this.state.submittedQuestions,totalQuestions:this.state.totalQuestions}):o&&"verbal"===a&&s>0?p.a.createElement(D,{totalCount:s,duration:u,continue:function(){return e.setState({verbalNew:!1})}}):"verbal"===a&&s>0?p.a.createElement(h.e,{submitClickedHandler:function(){return 0===n&&0===i?e.submitClickedHandler():e.changeSequence("verbal")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,decreaseCountHandler:function(){return e.decreaseCountHandler("verbal")},data:this.state,upload:this.upload}):l&&"coding"===a&&i>0?p.a.createElement(O,{totalCount:i,duration:m,continue:function(){return e.setState({codingNew:!1})}}):"coding"===a&&i>0?p.a.createElement(H.default,{submitClickedHandler:function(){return 0===s&&0===n?e.submitClickedHandler():e.changeSequence("coding")},decreaseCountHandler:function(){return e.decreaseCountHandler("coding")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,data:this.state,upload:this.upload}):c&&"mcq"===a&&n>0?p.a.createElement(x,{totalCount:n,duration:d,continue:function(){return e.setState({mcqNew:!1})}}):"mcq"===a&&n>0?p.a.createElement(E.default,{submitClickedHandler:function(){return 0==s&&0===i?e.submitClickedHandler():e.changeSequence("mcq")},decreaseCountHandler:function(){return e.decreaseCountHandler("mcq")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,data:this.state,upload:this.upload}):p.a.createElement("div",{style:{padding:"20px 0",display:"flex",justifyContent:"center"}},p.a.createElement(P.a,{style:{color:"#04724D"}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e&&e.UserReducer&&e.UserReducer.singleAnswerProgress&&!e.UserReducer.isUserquestionDataAdded&&(t.progress=e.UserReducer.singleAnswerProgress),e&&e.UserReducer&&e.UserReducer.isUserquestionDataAdded&&e.UserReducer.singleAnswerData){console.log("singleee answer data",e.UserReducer.singleAnswerData),e.UserReducer.isUserquestionDataAdded=!1,L=3,t.showDialog=!1,e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"api",level:1,metadata:{detail:{questionId:localStorage.getItem("questionId"),status:localStorage.getItem("questionStatus"),type:localStorage.getItem("type")},type:"success",response:e.UserReducer.singleAnswerData},timestamp:(new Date).toISOString()}}),M.open("elephantFiles",1).onsuccess=function(e){var t=e.target.result;t.transaction(["videoAnswers"],"readwrite").objectStore("videoAnswers",{keyPath:"questionId"}).delete("".concat(localStorage.getItem("questionId"))),t.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}};var a=t.submittedQuestions;if(a.push(t.currentQuestion),t.submittedQuestions=a,t.submittedQuestions.length<t.totalQuestions&&(t.progress=0),t.submittedQuestions.length==t.totalQuestions){var n={responseId:t.data&&t.data.response&&t.data.response.id,formdata:{status:"FINISHED"}};e.UserAction.updateResponse(n),e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"debug",level:3,metadata:{Page:"Congratulation"},timestamp:(new Date).toISOString()}}),setTimeout((function(){e.history.push({pathname:"/congratulation"})}),200)}}return e&&e.UserReducer&&e.UserReducer.singleAnswerError&&(e.UserReducer.singleAnswerError=!1,e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"api",level:1,metadata:{detail:{questionId:localStorage.getItem("questionId"),status:localStorage.getItem("questionStatus"),type:localStorage.getItem("type")},type:"error",response:e.UserReducer.singleAnswerError},timestamp:(new Date).toISOString()}}),setTimeout((function(){e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"debug",level:3,metadata:{Page:"Error Page"},timestamp:(new Date).toISOString()}}),e.history.push({pathname:"/error"})}),2e3)),t}}]),a}(p.a.Component);t.default=Object(w.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(Object(g.e)(B))},259:function(e,t,a){e.exports=a.p+"static/media/login_page_logo.d598eaad.png"},260:function(e,t,a){},268:function(e,t,a){e.exports=a.p+"static/media/warning.d58f1327.svg"},269:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){e.exports=a.p+"static/media/Submitting.a188991a.svg"},273:function(e,t,a){},274:function(e,t,a){},669:function(e,t,a){}}]);
//# sourceMappingURL=6.b5d61fea.chunk.js.map