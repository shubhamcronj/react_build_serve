(this["webpackJsonpadmin-hire-tool-frontend"]=this["webpackJsonpadmin-hire-tool-frontend"]||[]).push([[6],{196:function(e,t,a){"use strict";a.r(t),a.d(t,"ReadQuestion",(function(){return v}));var n=a(46),s=a(47),i=a(64),r=a(63),o=a(0),c=a.n(o),l=(a(261),a(33)),d=a(15),u=a(248),m=a(12),p=a(28),v=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).remainingTimeHandler=function(e){return e},s.state={},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props&&this.props.responseId&&this.props.type&&this.props.question){var e={questionId:this.props.question.id,responseId:this.props.responseId,type:this.props.type,questionStatus:2};this.props.UserAction.updateResponse(e)}}},{key:"render",value:function(){return c.a.createElement("div",{className:"read-question-main"},c.a.createElement("div",{className:"read-question-heading"},"Live Interview"),c.a.createElement("div",{className:"read-question-body"},c.a.createElement("div",{className:"read-question-timer"},c.a.createElement(u.a,{durationTime:this.props.durationTime,className:"timer-new",nextBtn:!0,handleTimer:this.props.readQuestionTimerEnds,remainingTimeHandler:this.remainingTimeHandler,isPlaying:!0})),c.a.createElement("div",{className:"read-question-time-left"},"Time left to read the question"),c.a.createElement("div",{className:"read-question-ques-div"},c.a.createElement("div",{className:"read-question-time-left"},"Please Read Question / Prepare Answer"),c.a.createElement("div",{className:"ques-wrapper"},c.a.createElement("div",{className:"question-number"},"Q.",this.props.quesNo," "),c.a.createElement("div",{className:"question-text-new",dangerouslySetInnerHTML:{__html:this.props.question&&this.props.question.QuestionText}})))))}}]),a}(o.Component);t.default=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(p.b)(m,e)}}))(Object(d.e)(v))},198:function(e,t,a){"use strict";a.r(t),a.d(t,"Interview",(function(){return F}));var n=a(90),s=a(8),i=a.n(s),r=a(80),o=a(3),c=a(46),l=a(47),d=a(64),u=a(63),m=a(0),p=a.n(m),v=a(33),h=a(237),g=(a(270),a(15)),b=a(28),f=a(12),S=a(248),w=a(283),E=a(271),k=a.n(E),y=a(254),I=a(251),N=a.n(I),R=a(713),O=a(247),C=a.n(O),T=a(196),D=a(195),q=a(252),x=parseInt("10")?parseInt("10"):10,A=parseInt("10")?parseInt("10"):10,j=0,Q="",U="",P="",H=0,M="",L="",F=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).selectionOperation=function(e){var t=s.state.responseId,a=s.state.events,n={type:"browser",level:2,metadata:"".concat(e," action triggered"),timestamp:(new Date).toISOString()};a.push(Object(o.a)(Object(o.a)({},n),{},{time:s.state.timerInput-s.state.remainingTime})),t&&s.setState({events:a}),t&&s.addEventProctoring(t,n)},s.addEventProctoring=function(e,t){s.props.UserAction.addEvent({responseId:e,event:t})},s.handleStart=function(){s.clockRef.current.start()},s.handleTimeUpdate=function(e,t){s.state.time!==e&&s.setState({time:e,remainingTime:t})},s.handleNext=function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.state.retake){e.next=19;break}return e.next=3,s.setState({restartTimer:!0,isPlaying:!0});case 3:return s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:{detail:"Inside HandleNext for Question ".concat(s.state.activeStep+1),isPlaying:s.state.isPlaying},timestamp:(new Date).toISOString()}}),e.next=6,s.handleDownload(t);case 6:return a=[],t.map((function(e){a.push(e.id)})),s.getStepContent(t,s.state.activeStep),e.next=11,s.setState({activeStep:s.state.activeStep+1,showReadQuestion:!0,retakesAvailable:s.state.totalRetakes-1});case 11:if(H+=1,0,!(s.state.questionData.length>0)){e.next=18;break}return r=s.state.questionData[s.state.activeStep].Questionstime,n=Number(r),e.next=18,s.setState({timerInput:n});case 18:console.log("isPlaying",s.state.isPlaying,"RemainingTime",s.state.remainingTime);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleFinish=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.state.retake){e.next=9;break}return s.setState({submitClicked:!0,isPlaying:!0}),e.next=4,s.handleDownload(t);case 4:a=[],t.map((function(e){a.push(e.id)})),[].push(s.getStepContent(s.state.activeStep)),s.props.submitClickedHandler();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handlePriorUpload=function(){var e=Object(r.a)(i.a.mark((function e(t,a,r){var o,c,l,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.skipable&&s.state.timerInput&&(s.setState({skipable:!1}),setTimeout((function(){s.setState({skipable:!0})}),1e3*(x+A))),(c=new FormData).append("video",t,a),M&&c.append("video",M,L),c.append("timeTaken",j),c.append("events",JSON.stringify(s.state.events)),l={questionId:r[s.state.activeStep],responseId:s.state.responseId,type:"verbal",questionStatus:3,timeTaken:j},d=s.state.activeStep+1,"verbal",u={questionId:r[s.state.activeStep],responseId:s.state.responseId,type:"verbal",questionStatus:3,timeTaken:j,videoFile:t,videoFileName:a,screenFile:M,screenFileName:L,events:JSON.stringify(s.state.events)},s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:(o={type:"Question Submit Start",questionId:r[s.state.activeStep],responseId:s.state.responseId},Object(n.a)(o,"type","verbal"),Object(n.a)(o,"questionStatus",3),Object(n.a)(o,"events",s.state.events),Object(n.a)(o,"timeTaken",j),o),timestamp:(new Date).toISOString()},questionId:r[s.state.activeStep],type:"verbal",questionStatus:3}),s.props.upload(c,l,u,d,"verbal"),s.setState({faceNotDetected:0});case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),s.handleStartCaptureClick=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);s.mediaRecorderRef&&(s.mediaRecorderRef.current=new MediaRecorder(s.webcamRef.current.stream,{mimeType:e?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm",audioBitsPerSecond:128e3,videoBitsPerSecond:625e3})),s.setState({capturing:!0},(function(){s.childRef.current.startCapture()})),M="",L="",s.mediaRecorderRef&&s.mediaRecorderRef.current&&"inactive"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.start(),s.mediaRecorderRef.current.addEventListener("dataavailable",s.handleDataAvailable))},s.handleAbort=function(){s.mediaRecorderRef&&s.mediaRecorderRef.current&&"recording"==s.mediaRecorderRef.current.state&&(s.childRef.current.abortCapture(),s.mediaRecorderRef.current.stop(),s.mediaRecorderRef.current.addEventListener("stop",(function(){s.setState({recordedChunks:[]})})),s.setState({capturing:!1}),s.handleStartCaptureClick())},s.handleStopCaptureClick=function(){s.mediaRecorderRef&&s.mediaRecorderRef.current&&"recording"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.stop(),s.setState({capturing:!1}))},s.handleDownload=function(e){var t=[];if(e.map((function(e){t.push(e.id)})),s.state.recordedChunks.length){var a=new Blob(s.state.recordedChunks,{type:"video/webm"}),n=URL.createObjectURL(a),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=n,window.URL.revokeObjectURL(n),s.setState({recordedChunks:[]});var r=new File([a],"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.activeStep,".mp4")),o="".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.activeStep,".mp4");s.setState({videofilename:o}),s.handlePriorUpload(r,"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.activeStep,".mp4"),t)}},s.handleDataAvailable=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,console.log("data sizee of question ".concat(s.state.activeStep+1),a.size),s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:{detail:"data sizee of question ".concat(s.state.activeStep+1," insideHandleDataAvailable"),dataSize:a.size},timestamp:(new Date).toISOString()}}),e.next=5,s.setState({recordedChunks:s.state.recordedChunks.concat(a)});case 5:j=s.state.timerInput-s.state.remainingTime,s.state.activeStep==s.state.questionData.length-1?s.handleFinish(s.state.questionData):s.handleNext(s.state.questionData);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleTimer=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({restartTimer:!1,showDialog:!1,retake:!1,isPlaying:!1});case 2:setTimeout((function(){s.handleStopCaptureClick(t)}),2e3),s.childRef.current.stopCapture();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.capture=function(){var e=s.webcamRef&&s.webcamRef.current&&s.webcamRef.current.getScreenshot(),t=e&&e.substring("data:image/jpeg;base64".length+1)?e.substring("data:image/jpeg;base64".length+1):null;s.setState({screenShot:t}),s.props.UserAction.verifyScreenshot({base64:t})},s.readQuestionTimerEnds=function(){s.setState({showReadQuestion:!1})},s.retakeHandler=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.state.retakesAvailable&&s.state.retakesAvailable>0)){e.next=8;break}return e.next=3,s.setState({retakesAvailable:s.state.retakesAvailable-1,showRetakeDialog:!1,restartTimer:!0,retake:!0,showDialog:!1,events:[]});case 3:t={questionId:s.state.questionData[s.state.activeStep].id,responseId:s.state.responseId,type:"verbal",questionStatus:2},s.props.UserAction.updateResponse(t),s.handleAbort(),s.setState({restartTimer:!1}),s.state.skipable&&s.state.timerInput&&!s.state.showReadQuestion&&(s.setState({skipable:!1}),setTimeout((function(){s.setState({skipable:!0})}),1e3*x));case 8:case"end":return e.stop()}}),e)}))),s.retakeClicked=function(){s.state.totalRetakes-s.state.retakesAvailable!==s.state.totalRetakes&&s.state.totalRetakes-s.state.retakesAvailable>0&&s.setState({showRetakeDialog:!0})},s.handleEarlySubmit=function(){s.state.skipable&&s.state.retakesAvailable&&s.state.retakesAvailable>0?s.setState({showDialog:!0}):s.state.skipable&&s.handleTimer(s.state.questionData)},s.handleTimerEnd=function(){s.state.retakesAvailable&&s.state.retakesAvailable>0?s.setState({showDialog:!0}):s.handleTimer(s.state.questionData)},s.clockRef=p.a.createRef(),s.mediaRecorderRef=p.a.createRef(),s.timer=0,s.state={restartTimer:!1,audioNew:null,ques:[],capturing:!1,activeStep:0,audio:!1,video:!1,recordedChunks:[],question:[],questions:[],videofilename:"",isDataArrived:!0,questionData:[],submitClicked:!1,faceNotDetected:0,submittedQuestions:[],totalQuestions:0,submissionQueue:[],responseId:"",noOfRetakes:0,showDialog:!1,showReadQuestion:!1,totalRetakes:0,retakesAvailable:0,retake:!1,showRetakeDialog:!1,remainingTime:0,isPlaying:!0,skipable:!1,ScheduleId:"",CandidateId:"",timerInput:0,time:"",events:[],skipableArrived:!1},s.vid=p.a.createRef(),s.audio=p.a.createRef(),s.webcamRef=p.a.createRef(),s.childRef=p.a.createRef(),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,n,s,r,c,l,d,u,m,p,v=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props||!this.props.data){e.next=18;break}return t=this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response,a=t.id,n=t.candidateId,s=t.scheduleId,e.next=4,this.setState({responseId:a,ScheduleId:s,CandidateId:n});case 4:if(Q=s,U=n,r=[],this.props.data&&this.props.data.verbalQuestions&&this.props.data.verbalQuestions.map((function(e){r.push({id:e.id,QuestionText:e.text,Questionstime:e.suggestedDuration})})),this.setState({questionData:r,totalQuestions:r.length,showReadQuestion:!0}),0,!(r.length>0)){e.next=15;break}return l=r[this.state.activeStep].Questionstime,c=Number(l),e.next=15,this.setState({timerInput:c});case 15:this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response&&this.props.data.data.response.questionType&&this.props.data.data.response.questionType.length>0&&this.props.data.data.response.questionType.map((function(e){"verbal"==e.name.toLowerCase()&&(e.retake&&v.setState({totalRetakes:e.retake,retakesAvailable:e.retake-1}),e.skipable&&v.state.timerInput&&(v.setState({skipableArrived:!0}),setTimeout((function(){v.setState({skipable:!0})}),1e3*(x+A))))})),document.addEventListener("contextmenu",(function(e){e.preventDefault();var t=v.state.events,n={type:"browser",level:2,metadata:"Right click triggered",timestamp:(new Date).toISOString()};t.push(Object(o.a)(Object(o.a)({},n),{},{time:v.state.timerInput-v.state.remainingTime})),a&&v.setState({events:t}),a&&v.addEventProctoring(a,n)})),document.addEventListener("visibilitychange",(function(e){if(window.location.pathname.includes("/interview-process"))if("visible"==document.visibilityState){var t=v.state.events,n={type:"browser",level:2,metadata:"tab is active",timestamp:(new Date).toISOString()};t.push(Object(o.a)(Object(o.a)({},n),{},{time:v.state.timerInput-v.state.remainingTime})),a&&v.setState({events:t}),a&&v.addEventProctoring(a,n)}else{var s=v.state.events,i={type:"browser",level:2,metadata:"tab is inactive",timestamp:(new Date).toISOString()};s.push(Object(o.a)(Object(o.a)({},i),{},{time:v.state.timerInput-v.state.remainingTime})),a&&v.setState({events:s}),a&&v.addEventProctoring(a,i)}}));case 18:this.getMicrophone(),d=new Date,u=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate(),m=d.getHours()+"-"+d.getMinutes()+"-"+d.getSeconds(),p=u+"-"+m,this.setState({timedate:p}),P=p;case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMicrophone",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,this.setState({audioNew:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepContent",value:function(e,t){if(e.length>0){var a=[];e.map((function(e){a.push(e.QuestionText)}));var n=a[this.state.activeStep];switch(this.state.activeStep){case this.state.activeStep:return p.a.createElement("div",null,p.a.createElement("div",{className:"question-text"},"Q",this.state.activeStep+1,".",p.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})));default:return"Unknown stepIndex"}}}},{key:"onScreenAccess",value:function(){console.log("got Screen access")}},{key:"onRecordStart",value:function(){console.log("started recording")}},{key:"onRecordStop",value:function(){console.log("stopped recording")}},{key:"onUserStop",value:function(){console.log("user stopped screen access"),M="",L=""}},{key:"onVideoFile",value:function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new File([t],"$".concat(Q,"-").concat(U,"-").concat(P,"-").concat(H,".mp4")),n="".concat(Q,"-").concat(U,"-").concat(P,"-").concat(H,"Screen.mp4"),M=a,L=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){console.log("recieved abort callback")}},{key:"render",value:function(){var e=this,t=this.state.questionData;localStorage.setItem("questiondata",JSON.stringify(t));var a=JSON.parse(localStorage.getItem("questiondata")),n=[],s=[];a.map((function(e){n.push(parseInt(e.Questionstime)),s.push(1e4)}));for(var i=[],r=1;r<=t.length;r++)i.push(r);return p.a.createElement("div",{onCopy:function(){return e.selectionOperation("Copy")},onCut:function(){return e.selectionOperation("Cut")},onPaste:function(){return e.selectionOperation("Paste")}},p.a.createElement(q.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,onRecordStart:this.onRecordStart,onRecordStop:this.onRecordStop,onVideoFile:this.onVideoFile,onAbort:this.onAbort}),localStorage.getItem("login")&&localStorage.getItem("preview")?this.state.showReadQuestion?p.a.createElement(T.default,{durationTime:A,question:this.state.questionData[this.state.activeStep],quesNo:this.state.activeStep+1,responseId:this.state.responseId,type:"verbal",readQuestionTimerEnds:this.readQuestionTimerEnds}):p.a.createElement("div",{className:"interview-main-div"},p.a.createElement(R.a,{className:"first-dialog-submit",open:this.state.showDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement("div",{className:"main-dialog-heading"},"Do you want to retake or submit?"),p.a.createElement("div",{className:"main-dialog-sub-heading"},"You have ",this.state.retakesAvailable," retakes left."),p.a.createElement("div",{className:"main-dialog-buttons-wrapper"},p.a.createElement("div",{className:"dialog-retry-button",onClick:this.retakeHandler},"Retake"),p.a.createElement("div",{className:"dialog-submit-button",onClick:this.handleTimer},"Submit"))),this.state.retakesAvailable&&this.state.retakesAvailable>0?p.a.createElement(R.a,{className:"first-dialog-submit",open:this.state.showRetakeDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement("div",{className:"main-dialog-heading"},"Are you sure you want to retake?"),p.a.createElement("div",{className:"main-dialog-sub-heading"},"You have ",this.state.retakesAvailable," retakes left."),p.a.createElement("div",{className:"main-dialog-buttons-wrapper"},p.a.createElement("div",{className:"dialog-retry-button",onClick:function(){e.setState({showRetakeDialog:!1})}},"No"),p.a.createElement("div",{className:"dialog-submit-button",onClick:this.retakeHandler},"Yes"))):null,p.a.createElement("div",{className:"interview-row-wrapper"},p.a.createElement("div",{className:"Inter-1"},window.screen.width>1024?p.a.createElement("div",{className:"previews-heading"},p.a.createElement(w.a,null,"Live Interview")):null,window.screen.width>1024?p.a.createElement("div",{className:"previews-subHeading1"}):null),p.a.createElement("div",{className:"inter-2 total-questions"},p.a.createElement("div",null,p.a.createElement("div",{className:"questions-wrapper"},p.a.createElement("div",{className:"total"}," Total Questions"),p.a.createElement("div",{className:"circle-interview"},this.state.activeStep+1,"/",t.length))))),p.a.createElement("div",{class:"fluid-container"},p.a.createElement("div",{className:"interview-row-wrapper-new"},p.a.createElement("div",{className:"left-interview"},p.a.createElement("div",{className:"video-div"},p.a.createElement("div",{className:"interview-video-new"},p.a.createElement(D.default,{handleStartCaptureClick:this.handleStartCaptureClick,handleAbort:this.handleAbort,handleDataAvailable:this.handleDataAvailable,handleStopCaptureClick:this.handleStopCaptureClick,capturing:this.state.capturing,webcamRef:this.webcamRef,recordedChunks:this.state.recordedChunks,handleDownload:this.handleDownload}),p.a.createElement("div",{className:"bottom-video-div"},p.a.createElement("div",{className:"retake-button-div"},p.a.createElement("div",{className:this.state.totalRetakes&&this.state.totalRetakes-this.state.retakesAvailable!=this.state.totalRetakes?"retake-button":"retake-disabled-button",onClick:this.retakeClicked},p.a.createElement("span",null,p.a.createElement(k.a,{style:{height:"20px",width:"20px",margin:"0 5px"}})),"Retake"," ",this.state.totalRetakes?p.a.createElement("span",null," ",this.state.totalRetakes-this.state.retakesAvailable," ","/ ",this.state.totalRetakes):"")),p.a.createElement("div",{className:"timer-button-div"},p.a.createElement("div",{className:"timer-button"},p.a.createElement(S.a,{durationTime:this.state.timerInput,handleTimer:function(){console.log("handle")},isPlaying:this.state.isPlaying,className:"timer-2",onTick:function(t,a){e.handleTimeUpdate(t,a)}}),this.state.time)),p.a.createElement("div",{className:"audio-analyser-div"},p.a.createElement("div",{className:"audio-img"}," ",p.a.createElement("img",{src:N.a})," "),this.state.audioNew?p.a.createElement("div",null," ",p.a.createElement(y.a,{amplitude:function(){return null},audio:this.state.audioNew})," "):null),p.a.createElement("div",{className:"submit-button-div"},p.a.createElement("div",{className:this.state.skipable?"submit-button":"submit-button-disabled",onClick:this.handleEarlySubmit},"Submit"))),p.a.createElement("div",{className:"total-questions-new"},p.a.createElement("div",null,p.a.createElement("div",{className:"questions-wrapper"},p.a.createElement("div",{className:"total"},"Total Questions"),p.a.createElement("div",{className:"circle-interview"},this.state.activeStep+1,"/",t.length))),0!==this.state.timerInput&&window.screen.width<=1024&&p.a.createElement(S.a,{durationTime:this.state.timerInput,disableBtn:this.state.restartTimer,remainingTimeHandler:this.remainingTimeHandler,handleTimer:function(){e.handleTimerEnd()},isPlaying:this.state.isPlaying,className:"timer-2",onTick:function(t,a){e.handleTimeUpdate(t,a)}}))))),p.a.createElement("div",{className:"right-interview"},p.a.createElement("div",{className:"question-div"},0!==this.state.timerInput&&window.screen.width>1024&&p.a.createElement(S.a,{durationTime:this.state.timerInput,remainingTimeHandler:this.remainingTimeHandler,disableBtn:this.state.restartTimer,handleTimer:function(){e.handleTimerEnd()},isPlaying:this.state.isPlaying,className:"timer-1"}),p.a.createElement("div",{className:"content-div"},p.a.createElement("div",{className:"qustion-content-div"},this.state.activeStep===i.length?p.a.createElement("div",null):p.a.createElement("div",null,p.a.createElement("span",{className:"laptop-only",style:{display:"flex",fontSize:"12px",marginLeft:"20px"}},"Please Answer"),p.a.createElement("div",{className:"question"},p.a.createElement("div",null,this.getStepContent(t,this.state.activeStep))))),p.a.createElement("div",{className:"buttons-wrapper"},p.a.createElement(h.a,{variant:"contained",className:this.state.skipable?"Button-next":"Button-next-disabled",style:{width:this.state.skipableArrived?"200px":"350px"},onClick:this.handleEarlySubmit},this.state.skipableArrived?p.a.createElement("span",null,"Next Question"):p.a.createElement("span",null,"Next Question"," ","in ".concat(this.state.remainingTime," seconds")),p.a.createElement("span",null,p.a.createElement(C.a,{style:{height:"15px",width:"15px"}}))),p.a.createElement(h.a,{variant:"contained",className:"Button-retry",onClick:this.retakeClicked},p.a.createElement("span",null,"Retake"),p.a.createElement("span",null,p.a.createElement(k.a,{style:{height:"15px",width:"15px"}}))))))))),p.a.createElement("div",{style:{display:"flex",justifyContent:"end",marginRight:"30px",marginTop:"20px"},className:"interview-logo"})):p.a.createElement("div",null,"Access Blocked"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e&&e.UserReducer&&e.UserReducer.isScreenShotDataArrived&&e.UserReducer.screenShot&&e.UserReducer.screenShot.data&&(e.UserReducer.isScreenShotDataArrived=!1,e.UserReducer.screenShot.data.faces||(t.faceNotDetected=t.faceNotDetected+1)),t}}]),a}(m.Component);t.default=Object(v.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(b.b)(f,e)}}))(Object(g.e)(F))},199:function(e,t,a){"use strict";a.r(t),a.d(t,"Submitting",(function(){return g}));var n=a(46),s=a(47),i=a(64),r=a(63),o=a(0),c=a.n(o),l=(a(272),a(33)),d=a(273),u=a.n(d),m=a(12),p=a(15),v=a(28),h=a(666),g=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:!1},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},window.addEventListener("beforeunload",this.keepOnPage),setTimeout((function(){e.setState({show:!0})}),1e3)}},{key:"componentDidUnmount",value:function(){window.onbeforeunload=null,this.props.UserAction.addEvent({responseId:this.props.responseId,event:{type:"debug",level:3,metadata:{Page:"Submission Page"},timestamp:(new Date).toISOString()}})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.keepOnPage)}},{key:"keepOnPage",value:function(e){var t="Warning!\n\nNavigating away from this page will clear your response.";return e.returnValue=t,t}},{key:"render",value:function(){return console.log("insideee submitting"),c.a.createElement("div",{className:"submitting-main"},c.a.createElement("div",{className:"submitting-gif"},c.a.createElement("img",{src:u.a})),c.a.createElement("div",{className:"submitting-text"},"Submitting"," ",c.a.createElement("span",{style:{color:"#04724d"}}," ",this.props.submittedQuestions&&this.props.totalQuestions&&this.props.submittedQuestions.length==this.props.totalQuestions?this.props.totalQuestions:this.props.submittedQuestions.length+1)," ","of ",this.props.totalQuestions,", Please Wait...",c.a.createElement("div",{style:{padding:"20px",transform:"rotate(180deg)"}},this.props.progress&&this.props.progress>0&&this.state.show?c.a.createElement(h.a,{className:"linearProgressInternetLanding",variant:"determinate",value:this.props.progress,style:{backgroundColor:"#fff",borderRadius:"15px",height:"5px"}}):null),this.state.show?c.a.createElement("div",{style:{fontSize:"13px",textAlign:"center"}},"Uploading ",this.props.progress&&this.props.progress.toFixed(1),"%..."):null))}}]),a}(o.Component);t.default=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(v.b)(m,e)}}))(Object(p.e)(g))},200:function(e,t,a){"use strict";a.r(t);var n=a(90),s=a(8),i=a.n(s),r=a(80),o=a(3),c=a(46),l=a(47),d=a(64),u=a(63),m=a(0),p=a.n(m),v=(a(274),a(248)),h=a(12),g=a(28),b=a(33),f=a(694),S=a(237),w=a(247),E=a.n(w),k=a(195),y=a(254),I=a(251),N=a.n(I),R=a(252),O=parseInt("5")?parseInt("5"):5,C=0,T=0,D="",q="",x="",A=0,j="",Q="",U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).selectionOperation=function(e){var t=s.state.responseId,a=s.state.events,n={type:"browser",level:2,metadata:"".concat(e," action triggered"),timestamp:(new Date).toISOString()};a.push(Object(o.a)(Object(o.a)({},n),{},{time:T-s.state.remainingTime})),t&&s.setState({events:a}),t&&s.addEventProctoring(t,n)},s.addEventProctoring=function(e,t){s.props.UserAction.addEvent({responseId:e,event:t})},s.changeOption=function(e,t){var a=s.state,n=a.options,i=a.isMultiCheck;n&&n.length>0&&n.map((function(e,a){i?e.label===t&&(n[a].value=!0):e.label===t?n[a].value=!0:n[a].value=!1})),s.setState({options:n})},s.handleStartCaptureClick=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);s.setState({events:[]});var t={questionId:s.state.currentData.id,responseId:s.state.responseId,type:"mcq",questionStatus:2};s.props.UserAction.updateResponse(t),s.mediaRecorderRef&&(s.mediaRecorderRef.current=new MediaRecorder(s.webcamRef.current.stream,{mimeType:e?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm",audioBitsPerSecond:128e3,videoBitsPerSecond:625e3})),s.setState({capturing:!0},(function(){s.childRef.current.startCapture()})),j="",Q="",s.mediaRecorderRef&&s.mediaRecorderRef.current&&"inactive"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.start(),s.mediaRecorderRef.current.addEventListener("dataavailable",s.handleDataAvailable))},s.handleDataAvailable=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.data).size>0)){e.next=6;break}return e.next=4,s.setState({recordedChunks:s.state.recordedChunks.concat(a)});case 4:C=s.state.remainingTime<T?T-s.state.remainingTime:T,s.state.current===s.state.totalLength?s.handleFinish(s.state.McqData):s.handleNext(s.state.McqData);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleFinish=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({submitClicked:!0}),e.next=3,s.handleDownload(t);case 3:a=[],t.map((function(e){a.push(e.id)})),[].push(s.getStepContent(s.state.current)),s.props.submitClickedHandler();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleNext=function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n,r,o,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({restartTimer:!0,isPlaying:!0});case 2:return e.next=4,s.handleDownload(t);case 4:a=[],t.map((function(e){a.push(e.id)})),s.handleStartCaptureClick(),s.getStepContent(t,s.state.current),n=s.state,r=n.totalLength,o=n.current,c=n.McqData,o<r&&c&&c[o]&&(l=c[o].metadata&&c[o].metadata.option&&c[o].metadata.option.length>0&&c[o].metadata.option.map((function(e){return{label:e.text,value:!1}})),s.setState({current:o+1,currentData:c[o],options:l,disablebtn:!0}),A=o+1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleStopCaptureClick=function(){s.mediaRecorderRef&&s.mediaRecorderRef.current&&"recording"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.stop(),s.setState({capturing:!1}))},s.handleDownload=function(e){var t=[];if(e.map((function(e){t.push(e.id)})),s.state.recordedChunks.length){var a=new Blob(s.state.recordedChunks,{type:"video/webm"}),n=URL.createObjectURL(a),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=n,window.URL.revokeObjectURL(n),s.setState({recordedChunks:[]});var r=new File([a],"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.current,".mp4")),o="".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.current,".mp4");s.setState({videofilename:o}),s.handlePriorUpload(r,"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.current,".mp4"),t)}},s.handlePriorUpload=function(){var e=Object(r.a)(i.a.mark((function e(t,a,r){var o,c,l,d,u,m,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.disablebtn?setTimeout((function(){s.setState({disablebtn:!1})}),1e3*O):(s.setState({disablebtn:!0}),setTimeout((function(){s.setState({disablebtn:!1})}),1e3*O)),c=s.state.options,l="No option Selected",c&&c.length>0&&c.map((function(e){e.value&&(l=e.label)})),d=new FormData,j&&d.append("video",j,Q),d.append("video",t,a),d.append("timeTaken",C),d.append("chosenOption",l),d.append("events",JSON.stringify(s.state.events)),u={questionId:s.state.currentData.id,responseId:s.state.responseId,type:"mcq",questionStatus:3,chosenOption:l,timeTaken:C},m=s.state.current,"mcq",p={questionId:s.state.currentData.id,responseId:s.state.responseId,type:"mcq",questionStatus:3,chosenOption:l,timeTaken:C,videoFile:t,videoFileName:a,screenFile:j,screenFileName:Q,events:JSON.stringify(s.state.events)},s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:(o={type:"Question Submit Start",questionId:s.state.currentData.id,responseId:s.state.responseId},Object(n.a)(o,"type","mcq"),Object(n.a)(o,"questionStatus",3),Object(n.a)(o,"chosenOption",l),Object(n.a)(o,"events",s.state.events),Object(n.a)(o,"timeTaken",C),o),timestamp:(new Date).toISOString()},questionId:s.state.currentData.id,type:"mcq",questionStatus:3}),s.props.upload(d,u,p,m,"mcq"),s.setState({faceNotDetected:0});case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),s.handleTimer=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({restartTimer:!1,isPlaying:!1,disablebtn:!0});case 2:setTimeout((function(){s.handleStopCaptureClick()}),2e3),s.childRef.current.stopCapture();case 4:case"end":return e.stop()}}),e)}))),s.handleTimeUpdate=function(){var e=Object(r.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.state.time==t){e.next=3;break}return e.next=3,s.setState({time:t,remainingTime:a});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.clockRef=p.a.createRef(),s.mediaRecorderRef=p.a.createRef(),s.timer=0,s.state={capturing:!1,recordedChunks:[],videofilename:"",submitClicked:!1,faceNotDetected:0,responseId:"",ScheduleId:"",CandidateId:"",timedate:(new Date).toISOString(),remainingTime:0,McqData:[],totalLength:0,current:0,currentData:null,options:null,disablebtn:!0,restartTimer:!1,isPlaying:!0,audio:!1,audioNew:null,isMultiCheck:!1,isSkipped:0,time:"",events:[],skipableArrived:!1},s.vid=p.a.createRef(),s.audio=p.a.createRef(),s.webcamRef=p.a.createRef(),s.childRef=p.a.createRef(),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;x=this.state.timedate;var t=this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response,a=t.questionType,n=t.id,s=t.candidateId,i=t.scheduleId,r=a&&a.length>0&&a.find((function(e){return e.name&&"mcq"===e.name.toLowerCase()})),c=this.props&&this.props.data,l=c&&c.mcqQuestions,d=n,u=0,m=l&&l[0]&&l[0].metadata&&l[0].metadata.option&&l[0].metadata.option.length>0&&l[0].metadata.option.map((function(e){return u=e.correct?u+1:u,{label:e.text,value:!1}}));this.setState({McqData:l,totalLength:l.length,current:1,currentData:l[0],options:m,responseId:d,isMultiCheck:u>1,isSkipped:r&&r.skipable?r.skipable:0,ScheduleId:i,CandidateId:s}),A=1,D=i,q=s;var p=r&&r.skipable?r.skipable:0;(p=p?1e3*O:0)&&this.setState({skipableArrived:!0}),p&&setTimeout((function(){e.setState({disablebtn:!1})}),p),this.getMicrophone(),document.addEventListener("contextmenu",(function(t){t.preventDefault();var a=e.state.events,s={type:"browser",level:2,metadata:"Right click triggered",timestamp:(new Date).toISOString()};a.push(Object(o.a)(Object(o.a)({},s),{},{time:T-e.state.remainingTime})),n&&e.setState({events:a}),n&&e.addEventProctoring(n,s)})),console.log(window.location),document.addEventListener("visibilitychange",(function(t){if(window.location.pathname.includes("/interview-process"))if("visible"==document.visibilityState){var a=e.state.events,s={type:"browser",level:2,metadata:"tab is active",timestamp:(new Date).toISOString()};a.push(Object(o.a)(Object(o.a)({},s),{},{time:T-e.state.remainingTime})),n&&e.setState({events:a}),n&&e.addEventProctoring(n,s)}else{var i=e.state.events,r={type:"browser",level:2,metadata:"tab is inactive",timestamp:(new Date).toISOString()};i.push(Object(o.a)(Object(o.a)({},r),{},{time:T-e.state.remainingTime})),n&&e.setState({events:i}),n&&e.addEventProctoring(n,r)}}))}},{key:"getMicrophone",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,this.setState({audioNew:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepContent",value:function(e,t){if(e.length>0){var a=[];e.map((function(e){a.push(e.QuestionText)}));var n=a[this.state.current];switch(this.state.activeStep){case this.state.activeStep:return p.a.createElement("div",null,p.a.createElement("div",{className:"question-text"},"Q",this.state.activeStep+1,". ",n));default:return"Unknown stepIndex"}}}},{key:"onScreenAccess",value:function(){console.log("got Screen access")}},{key:"onRecordStart",value:function(){console.log("started recording")}},{key:"onRecordStop",value:function(){console.log("stopped recording")}},{key:"onUserStop",value:function(){console.log("user stopped screen access"),j="",Q=""}},{key:"onVideoFile",value:function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new File([t],"$".concat(D,"-").concat(q,"-").concat(x,"-").concat(A,".mp4")),n="".concat(D,"-").concat(q,"-").concat(x,"-").concat(A,"Screen.mp4"),j=a,Q=n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){console.log("recieved abort callback")}},{key:"render",value:function(){var e=this,t=this.state,a=t.disablebtn,n=t.current,s=t.currentData,i=t.options,r=t.restartTimer,o=t.isPlaying,c=s&&s.suggestedDuration?s.suggestedDuration:0;T=c;var l=10;return i&&i.length>0&&i.map((function(e){14*e.label.length>l&&(l=14*e.label.length+60)})),p.a.createElement("div",{className:"InterViewMcqMain",onCopy:function(){return e.selectionOperation("Copy")},onCut:function(){return e.selectionOperation("Cut")},onPaste:function(){return e.selectionOperation("Paste")}},p.a.createElement(R.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,onRecordStart:this.onRecordStart,onRecordStop:this.onRecordStop,onVideoFile:this.onVideoFile,onAbort:this.onAbort}),p.a.createElement("div",{className:"McqHeadingMain"},"Live Interview"),p.a.createElement("div",{className:"McqQuestionArea"},p.a.createElement("div",{className:"QuestionNumber"},"Q.",n),p.a.createElement("div",{className:"QuestionArea"},p.a.createElement("div",{className:"QuestionText",dangerouslySetInnerHTML:{__html:s&&s.text}}),p.a.createElement("div",{className:"QuestionOptions",style:{display:l>360?"flex":"block",flexWrap:"wrap"}},i&&i.length>0&&i.map((function(t){return p.a.createElement("div",{className:"OptionArea",style:{width:l<360?"".concat(l,"px"):"360px"}},p.a.createElement(f.a,{className:"checkbox",checked:t.value,onChange:function(a){return e.changeOption(a,t.label)},label:t.label}),p.a.createElement("span",{className:"textLabel"},t.label))})))),p.a.createElement("div",{className:"VideoArea"},p.a.createElement("div",{className:"Timer"},c?p.a.createElement(v.a,{durationTime:c,className:"timer-new",isPlaying:o,disableBtn:r,nextBtn:!0,handleTimer:this.handleTimer,onTick:function(t,a){e.handleTimeUpdate(t,a)}}):null),p.a.createElement("div",{className:"VideoRecord"}," ",p.a.createElement(k.default,{handleStartCaptureClick:this.handleStartCaptureClick,handleDataAvailable:this.handleDataAvailable,handleStopCaptureClick:this.handleStopCaptureClick,capturing:this.state.capturing,webcamRef:this.webcamRef,recordedChunks:this.state.recordedChunks,handleDownload:this.handleDownload}),p.a.createElement("div",{className:"audioDiv"},p.a.createElement("div",{className:"audio-img"},p.a.createElement("img",{src:N.a})," "),this.state.audioNew?p.a.createElement("div",{className:"audio-analyser"},p.a.createElement(y.a,{amplitude:function(){return null},audio:this.state.audioNew})):null)),p.a.createElement("div",{className:"NextBtn"},p.a.createElement(S.a,{disabled:a,variant:"contained",width:this.state.skipableArrived?"200px":"350px",className:"Button-next ".concat(a?"disabled":"normal"),onClick:this.handleTimer},this.state.skipableArrived?p.a.createElement("span",null,"Next Question"):p.a.createElement("span",null,"Next Question"," ","in ".concat(this.state.remainingTime," seconds")),p.a.createElement("span",null,p.a.createElement(E.a,{style:{height:"15px",width:"15px"}})))))))}}]),a}(m.Component);t.default=Object(b.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(g.b)(h,e)}}))(U)},211:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(8),i=a.n(s),r=a(80),o=a(46),c=a(47),l=a(91),d=a(64),u=a(63),m=a(0),p=a.n(m),v=a(25),h=(a(198),a(199)),g=a(15),b=a(28),f=a(12),S=a(33),w=(a(32),a(23)),E=a(92),k=a(200),y=a(283),I=(a(275),a(260)),N=a.n(I);function R(e){var t=Math.floor(e/3600);e%=3600;var a=Math.floor(e/60),n=Math.floor(e%60);return t<10&&0!=t&&(t="0".concat(t)),0==t&&(t="00"),a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),t+":"+a+":"+n}var O=a(237),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Verbal Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(y.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(y.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:N.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : Verbal"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",R(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(O.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var T=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(b.b)(f,e)}}))(C),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Verbal Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(y.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(y.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:N.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : MCQ with verbal explanation"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",R(this.state.totalTime)),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," "," ","Please explain the choice made while making the choice")))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(O.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var q=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(b.b)(f,e)}}))(D),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Coding Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(y.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(y.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:N.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : Coding"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",R(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(O.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var A=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(b.b)(f,e)}}))(x),j=a(713),Q=a(269),U=a.n(Q),P=(a(669),a(663)),H=a(203),M=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,L=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,M.open("elephantFiles",2));L.onsuccess=function(e){e.target.result.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}},L.onupgradeneeded=function(e){e.target.result.createObjectStore("videoAnswers",{keyPath:"questionId"})};var F=3,B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={submitClicked:!1,submittedQuestions:[],totalQuestions:0,progress:0,submissionInProgress:!1,submissionQueue:[],data:null,totalMcq:0,totalVerbal:0,totalCoding:0,mcqQuestions:[],sequenceOrder:"",verbalQuestions:[],verbalNew:!1,mcqNew:!1,codingNew:!1,suggestedVerbalDuration:0,suggestedCodingDuration:0,showDialog:!1,order:[]},e.submitClickedHandler=function(){e.setState({submitClicked:!0,progress:0})},e.totalQuestionsHandler=function(t){e.setState({totalQuestions:t})},e.addToQueue=function(t,a){var n=e.state.submissionQueue;n.push(t),e.setState({submissionQueue:n}),e.callSubmitApi()},e.callSubmitApi=function(){var t=Object(l.a)(e),a=e.state.submissionQueue;if(a.length>0&&0==e.state.submissionInProgress){console.log("insidee"),e.setState({submissionInProgress:!0});var n=a.shift();t.setState({submissionQueue:a}),F-=1;var s=n.formdata,o=n.payload;localStorage.setItem("questionId",n.payload.questionId),localStorage.setItem("questionStatus",n.payload.questionStatus),localStorage.setItem("type",n.payload.type);var c=new XMLHttpRequest;c.timeout=6e5,c.upload.addEventListener("progress",(function(e){var a=e.loaded/e.total*100;t.props.UserAction.addsingleanswerProgress({progress:a})}),!1),c.addEventListener("load",function(){var e=Object(r.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("complete Handler"),200!=a.target.status){e.next=6;break}t.props.UserAction.addsingleanswerSuccess(JSON.parse(a.target.responseText)),t.setState({submissionInProgress:!1}),e.next=16;break;case 6:if(!F){e.next=14;break}return(s=t.state.submissionQueue).unshift(n),e.next=11,t.setState({submissionQueue:s,submissionInProgress:!1,showDialog:!0});case 11:t.callSubmitApi(),e.next=16;break;case 14:t.props.UserAction.addsingleanswerError({singleAnswerError:!0}),setTimeout((function(){t.setState({showDialog:!1})}),2e3);case 16:t.setState({progress:0}),t.callSubmitApi();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),c.addEventListener("error",function(){var e=Object(r.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("error Handler"),!F){e.next=9;break}return(s=t.state.submissionQueue).unshift(n),e.next=6,t.setState({submissionQueue:s,submissionInProgress:!1,showDialog:!0});case 6:t.callSubmitApi(),e.next=11;break;case 9:t.props.UserAction.addsingleanswerError({singleAnswerError:!0}),setTimeout((function(){t.setState({showDialog:!1})}),2e3);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),c.addEventListener("abort",(function(e){}),!1),c.open("PATCH","".concat(w.a,"/response/submission?responseId=").concat(o.responseId,"&questionId=").concat(o.questionId,"&questionStatus=").concat(o.questionStatus,"&type=").concat(o.type)),c.setRequestHeader("Authorization",localStorage.getItem("tokenNew")),c.send(s)}},e.upload=function(){var t=Object(r.a)(i.a.mark((function t(a,n,s,r,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.addToQueue({formdata:a,payload:n},{no:r,type:o}),e.decreaseCountHandler(o),M.open("elephantFiles",2).onsuccess=function(e){var t=e.target.result;t.transaction(["videoAnswers"],"readwrite").objectStore("videoAnswers",{keyPath:"questionId"}).add(s),t.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}};case 4:case"end":return t.stop()}}),t)})));return function(e,a,n,s,i){return t.apply(this,arguments)}}(),e.changeSequence=function(t){var a=e.state.order,n=a&&a.length>0&&a.findIndex((function(e){return e===t}));-1===n&&n===a.length-1||setTimeout((function(){e.setState({sequenceOrder:a[n+1]})}),2e3)},e.decreaseCountHandler=function(t){"verbal"===t?e.setState({totalVerbal:e.state.totalVerbal-1}):"coding"===t?e.setState({totalCoding:e.state.totalCoding-1}):e.setState({totalMcq:e.state.totalMcq-1})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},window.addEventListener("beforeunload",this.keepOnPage),E.a.pageview(window.location.pathname);var e=this.props.history&&this.props.history.location&&this.props.history.location.state,t=e&&e.totalMcq,a=e&&e.totalVerbal,s=e&&e.totalCoding,i=e&&e.data&&e.data.newResponse,r=0,o=0,c=0,l=0,d=0,u=0;if(e){var m=(e&&e.data).response,p=e.verbalQuestions,v=e.mcqQuestions,h=e.codingQuestions;r=m&&m.verbalQuestions&&m.verbalQuestions.length,o=m&&m.mcqQuestions&&m.mcqQuestions.length,c=m&&m.codingQuestions&&m.codingQuestions.length,p&&p.length>0&&p.map((function(e){l+=e.suggestedDuration})),v&&v.length>0&&v.map((function(e){u+=e.suggestedDuration})),h&&h.length>0&&h.map((function(e){d+=e.suggestedDuration}))}this.setState(Object(n.a)(Object(n.a)({},e),{},{totalQuestions:t+a+s,verbalNew:!!i||r===a,mcqNew:!!i||o===t,codingNew:!!i||c===s,suggestedMcqDuration:u,suggestedVerbalDuration:l,suggestedCodingDuration:d,order:e&&e.order}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.keepOnPage)}},{key:"keepOnPage",value:function(e){var t="Warning!\n\nNavigating away from this page will clear your response.";return e.returnValue=t,t}},{key:"render",value:function(){var e=this,t=this.state,a=t.sequenceOrder,n=t.totalMcq,s=t.totalVerbal,i=t.totalCoding,r=t.submitClicked,o=(t.totalQuestions,t.submittedQuestions,t.progress,t.verbalNew),c=t.mcqNew,l=t.codingNew,d=t.suggestedMcqDuration,u=t.suggestedVerbalDuration,m=t.suggestedCodingDuration;t.order;return p.a.createElement("div",{className:"main-parent"},p.a.createElement(j.a,{className:"warning-dialog-submit",open:this.state.showDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement("div",{className:"warning-dialog-main"},p.a.createElement("div",{className:"unstable-image"},p.a.createElement("img",{src:U.a})),p.a.createElement("div",{className:"warning-dialog-heading"},"Failed to submit response, Being retried"))),r&&n<1&&s<1&&i<1?p.a.createElement(h.default,{progress:this.state.progress,submittedQuestions:this.state.submittedQuestions,totalQuestions:this.state.totalQuestions,responseId:this.state&&this.state.data&&this.state.data.response&&this.state.data.response.id}):o&&"verbal"===a&&s>0?p.a.createElement(T,{totalCount:s,duration:u,continue:function(){return e.setState({verbalNew:!1})}}):"verbal"===a&&s>0?p.a.createElement(v.e,{submitClickedHandler:function(){return 0===n&&0===i?e.submitClickedHandler():e.changeSequence("verbal")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,decreaseCountHandler:function(){return e.decreaseCountHandler("verbal")},data:this.state,upload:this.upload}):l&&"coding"===a&&i>0?p.a.createElement(A,{totalCount:i,duration:m,continue:function(){return e.setState({codingNew:!1})}}):"coding"===a&&i>0?p.a.createElement(H.default,{submitClickedHandler:function(){return 0===s&&0===n?e.submitClickedHandler():e.changeSequence("coding")},decreaseCountHandler:function(){return e.decreaseCountHandler("coding")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,data:this.state,upload:this.upload}):c&&"mcq"===a&&n>0?p.a.createElement(q,{totalCount:n,duration:d,continue:function(){return e.setState({mcqNew:!1})}}):"mcq"===a&&n>0?p.a.createElement(k.default,{submitClickedHandler:function(){return 0==s&&0===i?e.submitClickedHandler():e.changeSequence("mcq")},decreaseCountHandler:function(){return e.decreaseCountHandler("mcq")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,data:this.state,upload:this.upload}):p.a.createElement("div",{style:{padding:"20px 0",display:"flex",justifyContent:"center"}},p.a.createElement(P.a,{style:{color:"#04724D"}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e&&e.UserReducer&&e.UserReducer.singleAnswerProgress&&!e.UserReducer.isUserquestionDataAdded&&(t.progress=e.UserReducer.singleAnswerProgress),e&&e.UserReducer&&e.UserReducer.isUserquestionDataAdded&&e.UserReducer.singleAnswerData){e.UserReducer.isUserquestionDataAdded=!1,F=3,t.showDialog=!1,e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"api",level:1,metadata:{detail:{questionId:localStorage.getItem("questionId"),status:localStorage.getItem("questionStatus"),type:localStorage.getItem("type")},type:"success"},timestamp:(new Date).toISOString()}}),M.open("elephantFiles",1).onsuccess=function(e){var t=e.target.result;t.transaction(["videoAnswers"],"readwrite").objectStore("videoAnswers",{keyPath:"questionId"}).delete("".concat(localStorage.getItem("questionId"))),t.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}};var a=t.submittedQuestions;if(a.push(localStorage.getItem("questionId")),t.submittedQuestions=a,t.submittedQuestions.length<t.totalQuestions&&(t.progress=0),t.submittedQuestions.length==t.totalQuestions){var n={responseId:t.data&&t.data.response&&t.data.response.id,formdata:{status:"FINISHED"}};e.UserAction.updateResponse(n),e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"debug",level:3,metadata:{Page:"Congratulation"},timestamp:(new Date).toISOString()}}),setTimeout((function(){e.history.push({pathname:"/congratulation"})}),200)}}return e&&e.UserReducer&&e.UserReducer.singleAnswerError&&(e.UserReducer.singleAnswerError=!1,e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,isError:!0,event:{type:"api",level:1,metadata:{detail:{questionId:localStorage.getItem("questionId"),status:localStorage.getItem("questionStatus"),type:localStorage.getItem("type")},type:"error",response:e.UserReducer.singleAnswerError},timestamp:(new Date).toISOString()}}),setTimeout((function(){e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"debug",level:3,metadata:{Page:"Error Page"},timestamp:(new Date).toISOString()}}),e.history.push({pathname:"/error"})}),2e3)),t}}]),a}(p.a.Component);t.default=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(b.b)(f,e)}}))(Object(g.e)(B))},260:function(e,t,a){e.exports=a.p+"static/media/login_page_logo.d598eaad.png"},261:function(e,t,a){},269:function(e,t,a){e.exports=a.p+"static/media/warning.a736dff5.svg"},270:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){e.exports=a.p+"static/media/Submitting.baee2f23.svg"},274:function(e,t,a){},275:function(e,t,a){},669:function(e,t,a){}}]);
//# sourceMappingURL=6.1db3fbcf.chunk.js.map