(this["webpackJsonpadmin-hire-tool-frontend"]=this["webpackJsonpadmin-hire-tool-frontend"]||[]).push([[6],{196:function(e,t,a){"use strict";a.r(t),a.d(t,"ReadQuestion",(function(){return h}));var n=a(46),s=a(47),i=a(64),r=a(63),o=a(0),c=a.n(o),l=(a(260),a(33)),u=a(15),d=a(247),m=a(13),p=a(28),h=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).remainingTimeHandler=function(e){return e},s.state={},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props&&this.props.responseId&&this.props.type&&this.props.question){var e={questionId:this.props.question.id,responseId:this.props.responseId,type:this.props.type,questionStatus:2};this.props.UserAction.updateResponse(e)}}},{key:"render",value:function(){return c.a.createElement("div",{className:"read-question-main"},c.a.createElement("div",{className:"read-question-heading"},"Live Interview"),c.a.createElement("div",{className:"read-question-body"},c.a.createElement("div",{className:"read-question-timer"},c.a.createElement(d.a,{durationTime:this.props.durationTime,className:"timer-new",nextBtn:!0,handleTimer:this.props.readQuestionTimerEnds,remainingTimeHandler:this.remainingTimeHandler,isPlaying:!0})),c.a.createElement("div",{className:"read-question-time-left"},"Time left to read the question"),c.a.createElement("div",{className:"read-question-ques-div"},c.a.createElement("div",{className:"read-question-time-left"},"Please Read Question / Prepare Answer"),c.a.createElement("div",{className:"ques-wrapper"},c.a.createElement("div",{className:"question-number"},"Q.",this.props.quesNo," "),c.a.createElement("div",{className:"question-text-new",dangerouslySetInnerHTML:{__html:this.props.question&&this.props.question.QuestionText}})))))}}]),a}(o.Component);t.default=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(p.b)(m,e)}}))(Object(u.e)(h))},198:function(e,t,a){"use strict";a.r(t),a.d(t,"Interview",(function(){return L}));var n=a(90),s=a(9),i=a.n(s),r=a(80),o=a(46),c=a(47),l=a(64),u=a(63),d=a(0),m=a.n(d),p=a(33),h=a(236),v=(a(269),a(15)),g=a(28),f=a(13),b=a(247),S=a(282),w=a(270),k=a.n(w),E=a(253),y=a(250),I=a.n(y),N=a(711),R=a(246),C=a.n(R),T=a(196),D=a(195),O=a(251),q=parseInt("10")?parseInt("10"):10,x=parseInt("10")?parseInt("10"):10,A=0,Q="",U="",j="",P=0,H="",M="",L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).selectionOperation=function(e){var t=s.state.responseId,a=s.state.events;a.push({type:"browser",level:2,metadata:"".concat(e," action triggered"),timestamp:(new Date).toISOString(),time:s.state.timerInput-s.state.remainingTime}),t&&s.setState({events:a})},s.handleStart=function(){s.clockRef.current.start()},s.handleTimeUpdate=function(e,t){s.state.time!=e&&s.setState({time:e,remainingTime:t})},s.handleNext=function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.state.retake){e.next=17;break}return e.next=3,s.setState({restartTimer:!0,isPlaying:!0});case 3:return e.next=5,s.handleDownload(t);case 5:return a=[],t.map((function(e){a.push(e.id)})),s.getStepContent(t,s.state.activeStep),e.next=10,s.setState({activeStep:s.state.activeStep+1,showReadQuestion:!0,retakesAvailable:s.state.totalRetakes-1});case 10:if(P+=1,0,!(s.state.questionData.length>0)){e.next=17;break}return r=s.state.questionData[s.state.activeStep].Questionstime,n=Number(r),e.next=17,s.setState({timerInput:n});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleFinish=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.state.retake){e.next=9;break}return s.setState({submitClicked:!0}),e.next=4,s.handleDownload(t);case 4:a=[],t.map((function(e){a.push(e.id)})),[].push(s.getStepContent(s.state.activeStep)),s.props.submitClickedHandler();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handlePriorUpload=function(){var e=Object(r.a)(i.a.mark((function e(t,a,r){var o,c,l,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.skipable&&s.state.timerInput&&(s.setState({skipable:!1}),setTimeout((function(){s.setState({skipable:!0})}),1e3*(q+x))),(c=new FormData).append("video",t,a),H&&c.append("video",H,M),c.append("timeTaken",A),c.append("events",JSON.stringify(s.state.events)),l={questionId:r[s.state.activeStep],responseId:s.state.responseId,type:"verbal",questionStatus:3,timeTaken:A},u=s.state.activeStep+1,"verbal",d={questionId:r[s.state.activeStep],responseId:s.state.responseId,type:"verbal",questionStatus:3,timeTaken:A,videoFile:t,videoFileName:a,screenFile:H,screenFileName:M,events:JSON.stringify(s.state.events)},s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:(o={type:"Question Submit Start",questionId:r[s.state.activeStep],responseId:s.state.responseId},Object(n.a)(o,"type","verbal"),Object(n.a)(o,"questionStatus",3),Object(n.a)(o,"events",s.state.events),Object(n.a)(o,"timeTaken",A),o),timestamp:(new Date).toISOString()}}),s.props.upload(c,l,d,u,"verbal"),s.setState({faceNotDetected:0});case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),s.handleStartCaptureClick=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);s.mediaRecorderRef&&(s.mediaRecorderRef.current=new MediaRecorder(s.webcamRef.current.stream,{mimeType:e?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm",audioBitsPerSecond:128e3,videoBitsPerSecond:625e3})),s.setState({capturing:!0},(function(){s.childRef.current.startCapture()})),H="",M="",s.mediaRecorderRef&&s.mediaRecorderRef.current&&"inactive"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.start(),s.mediaRecorderRef.current.addEventListener("dataavailable",s.handleDataAvailable))},s.handleAbort=function(){s.mediaRecorderRef&&s.mediaRecorderRef.current&&"recording"==s.mediaRecorderRef.current.state&&(s.childRef.current.abortCapture(),s.mediaRecorderRef.current.stop(),s.mediaRecorderRef.current.addEventListener("stop",(function(){s.setState({recordedChunks:[]})})),s.setState({capturing:!1}),s.handleStartCaptureClick())},s.handleStopCaptureClick=function(){s.mediaRecorderRef&&s.mediaRecorderRef.current&&"recording"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.stop(),s.setState({capturing:!1}))},s.handleDownload=function(e){var t=[];if(e.map((function(e){t.push(e.id)})),s.state.recordedChunks.length){var a=new Blob(s.state.recordedChunks,{type:"video/webm"}),n=URL.createObjectURL(a),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=n,window.URL.revokeObjectURL(n),s.setState({recordedChunks:[]});var r=new File([a],"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.activeStep,".mp4")),o="".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.activeStep,".mp4");s.setState({videofilename:o}),s.handlePriorUpload(r,"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.activeStep,".mp4"),t)}},s.handleDataAvailable=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.data).size>0)){e.next=6;break}return e.next=4,s.setState({recordedChunks:s.state.recordedChunks.concat(a)});case 4:A=s.state.timerInput-s.state.remainingTime,s.state.activeStep==s.state.questionData.length-1?s.handleFinish(s.state.questionData):s.handleNext(s.state.questionData);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleTimer=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({restartTimer:!1,showDialog:!1,retake:!1,isPlaying:!1});case 2:setTimeout((function(){s.handleStopCaptureClick(t)}),2e3),s.childRef.current.stopCapture();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.capture=function(){var e=s.webcamRef&&s.webcamRef.current&&s.webcamRef.current.getScreenshot(),t=e&&e.substring("data:image/jpeg;base64".length+1)?e.substring("data:image/jpeg;base64".length+1):null;s.setState({screenShot:t}),s.props.UserAction.verifyScreenshot({base64:t})},s.readQuestionTimerEnds=function(){s.setState({showReadQuestion:!1})},s.retakeHandler=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.state.retakesAvailable&&s.state.retakesAvailable>0)){e.next=8;break}return e.next=3,s.setState({retakesAvailable:s.state.retakesAvailable-1,showRetakeDialog:!1,restartTimer:!0,retake:!0,showDialog:!1,events:[]});case 3:t={questionId:s.state.questionData[s.state.activeStep].id,responseId:s.state.responseId,type:"verbal",questionStatus:2},s.props.UserAction.updateResponse(t),s.handleAbort(),s.setState({restartTimer:!1}),s.state.skipable&&s.state.timerInput&&!s.state.showReadQuestion&&(s.setState({skipable:!1}),setTimeout((function(){s.setState({skipable:!0})}),1e3*q));case 8:case"end":return e.stop()}}),e)}))),s.retakeClicked=function(){s.state.totalRetakes-s.state.retakesAvailable!==s.state.totalRetakes&&s.state.totalRetakes-s.state.retakesAvailable>0&&s.setState({showRetakeDialog:!0})},s.handleEarlySubmit=function(){s.state.skipable&&s.state.retakesAvailable&&s.state.retakesAvailable>0?s.setState({showDialog:!0}):s.state.skipable&&s.handleTimer(s.state.questionData)},s.handleTimerEnd=function(){s.state.retakesAvailable&&s.state.retakesAvailable>0?s.setState({showDialog:!0}):s.handleTimer(s.state.questionData)},s.clockRef=m.a.createRef(),s.mediaRecorderRef=m.a.createRef(),s.timer=0,s.state={restartTimer:!1,audioNew:null,ques:[],capturing:!1,activeStep:0,audio:!1,video:!1,recordedChunks:[],question:[],questions:[],videofilename:"",isDataArrived:!0,questionData:[],submitClicked:!1,faceNotDetected:0,submittedQuestions:[],totalQuestions:0,submissionQueue:[],responseId:"",noOfRetakes:0,showDialog:!1,showReadQuestion:!1,totalRetakes:0,retakesAvailable:0,retake:!1,showRetakeDialog:!1,remainingTime:0,isPlaying:!0,skipable:!1,ScheduleId:"",CandidateId:"",timerInput:0,time:"",events:[]},s.vid=m.a.createRef(),s.audio=m.a.createRef(),s.webcamRef=m.a.createRef(),s.childRef=m.a.createRef(),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,n,s,r,o,c,l,u,d,m,p=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props||!this.props.data){e.next=18;break}return t=this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response,a=t.id,n=t.candidateId,s=t.scheduleId,e.next=4,this.setState({responseId:a,ScheduleId:s,CandidateId:n});case 4:if(Q=s,U=n,r=[],this.props.data&&this.props.data.verbalQuestions&&this.props.data.verbalQuestions.map((function(e){r.push({id:e.id,QuestionText:e.text,Questionstime:e.suggestedDuration})})),this.setState({questionData:r,totalQuestions:r.length,showReadQuestion:!0}),0,!(r.length>0)){e.next=15;break}return c=r[this.state.activeStep].Questionstime,o=Number(c),e.next=15,this.setState({timerInput:o});case 15:this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response&&this.props.data.data.response.questionType&&this.props.data.data.response.questionType.length>0&&this.props.data.data.response.questionType.map((function(e){"verbal"==e.name.toLowerCase()&&(e.retake&&p.setState({totalRetakes:e.retake,retakesAvailable:e.retake-1}),e.skipable&&p.state.timerInput&&setTimeout((function(){p.setState({skipable:!0})}),1e3*(q+x)))})),document.addEventListener("contextmenu",(function(e){e.preventDefault();var t=p.state.events;t.push({type:"browser",level:2,metadata:"Right click triggered",timestamp:(new Date).toISOString(),time:p.state.timerInput-p.state.remainingTime}),a&&p.setState({events:t})})),document.addEventListener("visibilitychange",(function(e){if("visible"==document.visibilityState){var t=p.state.events;t.push({type:"browser",level:2,metadata:"tab is active",timestamp:(new Date).toISOString(),time:p.state.timerInput-p.state.remainingTime}),a&&p.setState({events:t})}else{var n=p.state.events;n.push({type:"browser",level:2,metadata:"tab is inactive",timestamp:(new Date).toISOString(),time:p.state.timerInput-p.state.remainingTime}),a&&p.setState({events:n})}}));case 18:this.getMicrophone(),l=new Date,u=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate(),d=l.getHours()+"-"+l.getMinutes()+"-"+l.getSeconds(),m=u+"-"+d,this.setState({timedate:m}),j=m;case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMicrophone",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,this.setState({audioNew:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepContent",value:function(e,t){if(e.length>0){var a=[];e.map((function(e){a.push(e.QuestionText)}));var n=a[this.state.activeStep];switch(this.state.activeStep){case this.state.activeStep:return m.a.createElement("div",null,m.a.createElement("div",{className:"question-text"},"Q",this.state.activeStep+1,".",m.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})));default:return"Unknown stepIndex"}}}},{key:"onScreenAccess",value:function(){console.log("got Screen access")}},{key:"onRecordStart",value:function(){console.log("started recording")}},{key:"onRecordStop",value:function(){console.log("stopped recording")}},{key:"onUserStop",value:function(){console.log("user stopped screen access"),H="",M=""}},{key:"onVideoFile",value:function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=new File([t],"$".concat(Q,"-").concat(U,"-").concat(j,"-").concat(P,".mp4")),n="".concat(Q,"-").concat(U,"-").concat(j,"-").concat(P,"Screen.mp4"),H=a,M=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){console.log("recieved abort callback")}},{key:"render",value:function(){var e=this,t=this.state.questionData;localStorage.setItem("questiondata",JSON.stringify(t));var a=JSON.parse(localStorage.getItem("questiondata")),n=[],s=[];a.map((function(e){n.push(parseInt(e.Questionstime)),s.push(1e4)}));for(var i=[],r=1;r<=t.length;r++)i.push(r);return m.a.createElement("div",{onCopy:function(){return e.selectionOperation("Copy")},onCut:function(){return e.selectionOperation("Cut")},onPaste:function(){return e.selectionOperation("Paste")}},m.a.createElement(O.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,onRecordStart:this.onRecordStart,onRecordStop:this.onRecordStop,onVideoFile:this.onVideoFile,onAbort:this.onAbort}),localStorage.getItem("login")&&localStorage.getItem("preview")?this.state.showReadQuestion?m.a.createElement(T.default,{durationTime:x,question:this.state.questionData[this.state.activeStep],quesNo:this.state.activeStep+1,responseId:this.state.responseId,type:"verbal",readQuestionTimerEnds:this.readQuestionTimerEnds}):m.a.createElement("div",{className:"interview-main-div"},m.a.createElement(N.a,{className:"first-dialog-submit",open:this.state.showDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.a.createElement("div",{className:"main-dialog-heading"},"Do you want to retake or submit?"),m.a.createElement("div",{className:"main-dialog-sub-heading"},"You have ",this.state.retakesAvailable," retakes left."),m.a.createElement("div",{className:"main-dialog-buttons-wrapper"},m.a.createElement("div",{className:"dialog-retry-button",onClick:this.retakeHandler},"Retake"),m.a.createElement("div",{className:"dialog-submit-button",onClick:this.handleTimer},"Submit"))),this.state.retakesAvailable&&this.state.retakesAvailable>0?m.a.createElement(N.a,{className:"first-dialog-submit",open:this.state.showRetakeDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.a.createElement("div",{className:"main-dialog-heading"},"Are you sure you want to retake?"),m.a.createElement("div",{className:"main-dialog-sub-heading"},"You have ",this.state.retakesAvailable," retakes left."),m.a.createElement("div",{className:"main-dialog-buttons-wrapper"},m.a.createElement("div",{className:"dialog-retry-button",onClick:function(){e.setState({showRetakeDialog:!1})}},"No"),m.a.createElement("div",{className:"dialog-submit-button",onClick:this.retakeHandler},"Yes"))):null,m.a.createElement("div",{className:"interview-row-wrapper"},m.a.createElement("div",{className:"Inter-1"},window.screen.width>1024?m.a.createElement("div",{className:"previews-heading"},m.a.createElement(S.a,null,"Live Interview")):null,window.screen.width>1024?m.a.createElement("div",{className:"previews-subHeading1"}):null),m.a.createElement("div",{className:"inter-2 total-questions"},m.a.createElement("div",null,m.a.createElement("div",{className:"questions-wrapper"},m.a.createElement("div",{className:"total"}," Total Questions"),m.a.createElement("div",{className:"circle-interview"},this.state.activeStep+1,"/",t.length))))),m.a.createElement("div",{class:"fluid-container"},m.a.createElement("div",{className:"interview-row-wrapper-new"},m.a.createElement("div",{className:"left-interview"},m.a.createElement("div",{className:"video-div"},m.a.createElement("div",{className:"interview-video-new"},m.a.createElement(D.default,{handleStartCaptureClick:this.handleStartCaptureClick,handleAbort:this.handleAbort,handleDataAvailable:this.handleDataAvailable,handleStopCaptureClick:this.handleStopCaptureClick,capturing:this.state.capturing,webcamRef:this.webcamRef,recordedChunks:this.state.recordedChunks,handleDownload:this.handleDownload}),m.a.createElement("div",{className:"bottom-video-div"},m.a.createElement("div",{className:"retake-button-div"},m.a.createElement("div",{className:this.state.totalRetakes&&this.state.totalRetakes-this.state.retakesAvailable!=this.state.totalRetakes?"retake-button":"retake-disabled-button",onClick:this.retakeClicked},m.a.createElement("span",null,m.a.createElement(k.a,{style:{height:"20px",width:"20px",margin:"0 5px"}})),"Retake"," ",this.state.totalRetakes?m.a.createElement("span",null," ",this.state.totalRetakes-this.state.retakesAvailable," ","/ ",this.state.totalRetakes):"")),m.a.createElement("div",{className:"timer-button-div"},m.a.createElement("div",{className:"timer-button"},m.a.createElement(b.a,{durationTime:this.state.timerInput,handleTimer:function(){console.log("handle")},isPlaying:!0,className:"timer-2",onTick:function(t,a){e.handleTimeUpdate(t,a)}}),this.state.time)),m.a.createElement("div",{className:"audio-analyser-div"},m.a.createElement("div",{className:"audio-img"}," ",m.a.createElement("img",{src:I.a})," "),this.state.audioNew?m.a.createElement("div",null," ",m.a.createElement(E.a,{amplitude:function(){return null},audio:this.state.audioNew})," "):null),m.a.createElement("div",{className:"submit-button-div"},m.a.createElement("div",{className:this.state.skipable?"submit-button":"submit-button-disabled",onClick:this.handleEarlySubmit},"Submit"))),m.a.createElement("div",{className:"total-questions-new"},m.a.createElement("div",null,m.a.createElement("div",{className:"questions-wrapper"},m.a.createElement("div",{className:"total"},"Total Questions"),m.a.createElement("div",{className:"circle-interview"},this.state.activeStep+1,"/",t.length))),0!==this.state.timerInput&&window.screen.width<=1024&&m.a.createElement(b.a,{durationTime:this.state.timerInput,disableBtn:this.state.restartTimer,remainingTimeHandler:this.remainingTimeHandler,handleTimer:function(){e.handleTimerEnd()},isPlaying:this.state.isPlaying,className:"timer-2",onTick:function(t,a){e.handleTimeUpdate(t,a)}}))))),m.a.createElement("div",{className:"right-interview"},m.a.createElement("div",{className:"question-div"},0!==this.state.timerInput&&window.screen.width>1024&&m.a.createElement(b.a,{durationTime:this.state.timerInput,remainingTimeHandler:this.remainingTimeHandler,disableBtn:this.state.restartTimer,handleTimer:function(){e.handleTimerEnd()},isPlaying:this.state.isPlaying,className:"timer-1"}),m.a.createElement("div",{className:"content-div"},m.a.createElement("div",{className:"qustion-content-div"},this.state.activeStep===i.length?m.a.createElement("div",null):m.a.createElement("div",null,m.a.createElement("span",{className:"laptop-only",style:{display:"flex",fontSize:"12px",marginLeft:"20px"}},"Read your question"),m.a.createElement("div",{className:"question"},m.a.createElement("div",null,this.getStepContent(t,this.state.activeStep))))),m.a.createElement("div",{className:"buttons-wrapper"},m.a.createElement(h.a,{variant:"contained",className:this.state.skipable?"Button-next":"Button-next-disabled",onClick:this.handleEarlySubmit},m.a.createElement("span",null,"Next Question"),m.a.createElement("span",null,m.a.createElement(C.a,{style:{height:"15px",width:"15px"}}))),m.a.createElement(h.a,{variant:"contained",className:"Button-retry",onClick:this.retakeClicked},m.a.createElement("span",null,"Retake"),m.a.createElement("span",null,m.a.createElement(k.a,{style:{height:"15px",width:"15px"}}))))))))),m.a.createElement("div",{style:{display:"flex",justifyContent:"end",marginRight:"30px",marginTop:"20px"},className:"interview-logo"})):m.a.createElement("div",null,"Access Blocked"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e&&e.UserReducer&&e.UserReducer.isScreenShotDataArrived&&e.UserReducer.screenShot&&e.UserReducer.screenShot.data&&(e.UserReducer.isScreenShotDataArrived=!1,e.UserReducer.screenShot.data.faces||(t.faceNotDetected=t.faceNotDetected+1)),t}}]),a}(d.Component);t.default=Object(p.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(g.b)(f,e)}}))(Object(v.e)(L))},199:function(e,t,a){"use strict";a.r(t),a.d(t,"Submitting",(function(){return g}));var n=a(46),s=a(47),i=a(64),r=a(63),o=a(0),c=a.n(o),l=(a(271),a(33)),u=a(272),d=a.n(u),m=a(13),p=a(15),h=a(28),v=a(665),g=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={show:!1},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},window.addEventListener("beforeunload",this.keepOnPage),setTimeout((function(){e.setState({show:!0})}),1e3)}},{key:"componentDidUnmount",value:function(){window.onbeforeunload=null,this.props.UserAction.addEvent({responseId:this.props.responseId,event:{type:"debug",level:3,metadata:{Page:"Submission Page"},timestamp:(new Date).toISOString()}})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.keepOnPage)}},{key:"keepOnPage",value:function(e){var t="Warning!\n\nNavigating away from this page will clear your response.";return e.returnValue=t,t}},{key:"render",value:function(){return console.log("insideee submitting"),c.a.createElement("div",{className:"submitting-main"},c.a.createElement("div",{className:"submitting-gif"},c.a.createElement("img",{src:d.a})),c.a.createElement("div",{className:"submitting-text"},"Submitting ",c.a.createElement("span",{style:{color:"#04724d"}}," ",this.props.submittedQuestions&&this.props.totalQuestions&&this.props.submittedQuestions.length==this.props.totalQuestions?this.props.totalQuestions:this.props.submittedQuestions.length+1)," of ",this.props.totalQuestions,", Please Wait...",c.a.createElement("div",{style:{padding:"20px",transform:"rotate(180deg)"}},this.props.progress&&this.props.progress>0&&this.state.show?c.a.createElement(v.a,{className:"linearProgressInternetLanding",variant:"determinate",value:this.props.progress,style:{backgroundColor:"#fff",borderRadius:"15px",height:"5px"}}):null),this.state.show?c.a.createElement("div",{style:{fontSize:"13px",textAlign:"center"}},"Uploading ",this.props.progress&&this.props.progress.toFixed(1),"%..."):null))}}]),a}(o.Component);t.default=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(h.b)(m,e)}}))(Object(p.e)(g))},200:function(e,t,a){"use strict";a.r(t);var n=a(90),s=a(9),i=a.n(s),r=a(80),o=a(46),c=a(47),l=a(64),u=a(63),d=a(0),m=a.n(d),p=(a(273),a(247)),h=a(13),v=a(28),g=a(33),f=a(692),b=a(236),S=a(246),w=a.n(S),k=a(195),E=a(253),y=a(250),I=a.n(y),N=a(251),R=parseInt("5")?parseInt("5"):5,C=0,T=0,D="",O="",q="",x=0,A="",Q="",U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).selectionOperation=function(e){var t=s.state.responseId,a=s.state.events;a.push({type:"browser",level:2,metadata:"".concat(e," action triggered"),timestamp:(new Date).toISOString(),time:s.state.timerInput-s.state.remainingTime}),t&&s.setState({events:a})},s.changeOption=function(e,t){var a=s.state,n=a.options,i=a.isMultiCheck;n&&n.length>0&&n.map((function(e,a){i?e.label===t&&(n[a].value=!0):e.label===t?n[a].value=!0:n[a].value=!1})),s.setState({options:n})},s.handleStartCaptureClick=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);s.setState({events:[]});var t={questionId:s.state.currentData.id,responseId:s.state.responseId,type:"mcq",questionStatus:2};s.props.UserAction.updateResponse(t),s.mediaRecorderRef&&(s.mediaRecorderRef.current=new MediaRecorder(s.webcamRef.current.stream,{mimeType:e?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm",audioBitsPerSecond:128e3,videoBitsPerSecond:625e3})),s.setState({capturing:!0},(function(){s.childRef.current.startCapture()})),A="",Q="",s.mediaRecorderRef&&s.mediaRecorderRef.current&&"inactive"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.start(),s.mediaRecorderRef.current.addEventListener("dataavailable",s.handleDataAvailable))},s.handleDataAvailable=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.data).size>0)){e.next=6;break}return C=T-s.state.remainingTime,e.next=5,s.setState({recordedChunks:s.state.recordedChunks.concat(a)});case 5:s.state.current===s.state.totalLength?s.handleFinish(s.state.McqData):s.handleNext(s.state.McqData);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleFinish=function(){var e=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({submitClicked:!0}),e.next=3,s.handleDownload(t);case 3:a=[],t.map((function(e){a.push(e.id)})),[].push(s.getStepContent(s.state.current)),s.props.submitClickedHandler();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleNext=function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n,r,o,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({restartTimer:!0,isPlaying:!0});case 2:return e.next=4,s.handleDownload(t);case 4:a=[],t.map((function(e){a.push(e.id)})),s.handleStartCaptureClick(),s.getStepContent(t,s.state.current),n=s.state,r=n.totalLength,o=n.current,c=n.McqData,o<r&&c&&c[o]&&(l=c[o].metadata&&c[o].metadata.option&&c[o].metadata.option.length>0&&c[o].metadata.option.map((function(e){return{label:e.text,value:!1}})),s.setState({current:o+1,currentData:c[o],options:l,disablebtn:!0}),x=o+1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleStopCaptureClick=function(){s.mediaRecorderRef&&s.mediaRecorderRef.current&&"recording"==s.mediaRecorderRef.current.state&&(s.mediaRecorderRef.current.stop(),s.setState({capturing:!1}))},s.handleDownload=function(e){var t=[];if(e.map((function(e){t.push(e.id)})),s.state.recordedChunks.length){var a=new Blob(s.state.recordedChunks,{type:"video/webm"}),n=URL.createObjectURL(a),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=n,window.URL.revokeObjectURL(n),s.setState({recordedChunks:[]});var r=new File([a],"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.current,".mp4")),o="".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.current,".mp4");s.setState({videofilename:o}),s.handlePriorUpload(r,"".concat(s.state.ScheduleId,"-").concat(s.state.CandidateId,"-").concat(s.state.timedate,"-").concat(s.state.current,".mp4"),t)}},s.handlePriorUpload=function(){var e=Object(r.a)(i.a.mark((function e(t,a,r){var o,c,l,u,d,m,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.disablebtn?setTimeout((function(){s.setState({disablebtn:!1})}),1e3*R):(s.setState({disablebtn:!0}),setTimeout((function(){s.setState({disablebtn:!1})}),1e3*R)),c=s.state.options,l="No option Selected",c&&c.length>0&&c.map((function(e){e.value&&(l=e.label)})),u=new FormData,A&&u.append("video",A,Q),u.append("video",t,a),u.append("timeTaken",C),u.append("chosenOption",l),u.append("events",JSON.stringify(s.state.events)),d={questionId:s.state.currentData.id,responseId:s.state.responseId,type:"mcq",questionStatus:3,chosenOption:l,timeTaken:C},m=s.state.current,"mcq",p={questionId:s.state.currentData.id,responseId:s.state.responseId,type:"mcq",questionStatus:3,chosenOption:l,timeTaken:C,videoFile:t,videoFileName:a,screenFile:A,screenFileName:Q,events:JSON.stringify(s.state.events)},s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:(o={type:"Question Submit Start",questionId:s.state.currentData.id,responseId:s.state.responseId},Object(n.a)(o,"type","mcq"),Object(n.a)(o,"questionStatus",3),Object(n.a)(o,"chosenOption",l),Object(n.a)(o,"events",s.state.events),Object(n.a)(o,"timeTaken",C),o),timestamp:(new Date).toISOString()}}),s.props.upload(u,d,p,m,"mcq"),s.setState({faceNotDetected:0});case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),s.handleTimer=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({restartTimer:!1,isPlaying:!1,disablebtn:!0});case 2:setTimeout((function(){s.handleStopCaptureClick()}),2e3),s.childRef.current.stopCapture();case 4:case"end":return e.stop()}}),e)}))),s.handleTimeUpdate=function(e,t){s.state.time!=e&&s.setState({time:e,remainingTime:t})},s.clockRef=m.a.createRef(),s.mediaRecorderRef=m.a.createRef(),s.timer=0,s.state={capturing:!1,recordedChunks:[],videofilename:"",submitClicked:!1,faceNotDetected:0,responseId:"",ScheduleId:"",CandidateId:"",timedate:(new Date).toISOString(),remainingTime:0,McqData:[],totalLength:0,current:0,currentData:null,options:null,disablebtn:!0,restartTimer:!1,isPlaying:!0,audio:!1,audioNew:null,isMultiCheck:!1,isSkipped:0,time:"",events:[]},s.vid=m.a.createRef(),s.audio=m.a.createRef(),s.webcamRef=m.a.createRef(),s.childRef=m.a.createRef(),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;q=this.state.timedate;var t=this.props&&this.props.data&&this.props.data.data&&this.props.data.data.response,a=t.questionType,n=t.id,s=t.candidateId,i=t.scheduleId,r=a&&a.length>0&&a.find((function(e){return e.name&&"mcq"===e.name.toLowerCase()})),o=this.props&&this.props.data,c=o&&o.mcqQuestions,l=n,u=0,d=c&&c[0]&&c[0].metadata&&c[0].metadata.option&&c[0].metadata.option.length>0&&c[0].metadata.option.map((function(e){return u=e.correct?u+1:u,{label:e.text,value:!1}}));this.setState({McqData:c,totalLength:c.length,current:1,currentData:c[0],options:d,responseId:l,isMultiCheck:u>1,isSkipped:r&&r.skipable?r.skipable:0,ScheduleId:i,CandidateId:s}),x=1,D=i,O=s;var m=r&&r.skipable?r.skipable:0;(m=m?1e3*R:0)&&setTimeout((function(){e.setState({disablebtn:!1})}),m),this.getMicrophone(),document.addEventListener("contextmenu",(function(t){t.preventDefault();var a=e.state.events;a.push({type:"browser",level:2,metadata:"Right click triggered",timestamp:(new Date).toISOString(),time:e.state.timerInput-e.state.remainingTime}),n&&e.setState({events:a})})),document.addEventListener("visibilitychange",(function(t){if("visible"==document.visibilityState){var a=e.state.events;a.push({type:"browser",level:2,metadata:"tab is active",timestamp:(new Date).toISOString(),time:e.state.timerInput-e.state.remainingTime}),n&&e.setState({events:a})}else{var s=e.state.events;s.push({type:"browser",level:2,metadata:"tab is inactive",timestamp:(new Date).toISOString(),time:e.state.timerInput-e.state.remainingTime}),n&&e.setState({events:s})}}))}},{key:"getMicrophone",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,this.setState({audioNew:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepContent",value:function(e,t){if(e.length>0){var a=[];e.map((function(e){a.push(e.QuestionText)}));var n=a[this.state.current];switch(this.state.activeStep){case this.state.activeStep:return m.a.createElement("div",null,m.a.createElement("div",{className:"question-text"},"Q",this.state.activeStep+1,". ",n));default:return"Unknown stepIndex"}}}},{key:"onScreenAccess",value:function(){console.log("got Screen access")}},{key:"onRecordStart",value:function(){console.log("started recording")}},{key:"onRecordStop",value:function(){console.log("stopped recording")}},{key:"onUserStop",value:function(){console.log("user stopped screen access"),A="",Q=""}},{key:"onVideoFile",value:function(){var e=Object(r.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=new File([t],"$".concat(D,"-").concat(O,"-").concat(q,"-").concat(x,".mp4")),n="".concat(D,"-").concat(O,"-").concat(q,"-").concat(x,"Screen.mp4"),A=a,Q=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){console.log("recieved abort callback")}},{key:"render",value:function(){var e=this,t=this.state,a=t.disablebtn,n=t.current,s=t.currentData,i=t.options,r=t.restartTimer,o=t.isPlaying,c=s&&s.suggestedDuration?s.suggestedDuration:0;T=c;var l=10;return i&&i.length>0&&i.map((function(e){14*e.label.length>l&&(l=14*e.label.length+60)})),m.a.createElement("div",{className:"InterViewMcqMain",onCopy:function(){return e.selectionOperation("Copy")},onCut:function(){return e.selectionOperation("Cut")},onPaste:function(){return e.selectionOperation("Paste")}},m.a.createElement(N.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,onRecordStart:this.onRecordStart,onRecordStop:this.onRecordStop,onVideoFile:this.onVideoFile,onAbort:this.onAbort}),m.a.createElement("div",{className:"McqHeadingMain"},"Live Interview"),m.a.createElement("div",{className:"McqQuestionArea"},m.a.createElement("div",{className:"QuestionNumber"},"Q.",n),m.a.createElement("div",{className:"QuestionArea"},m.a.createElement("div",{className:"QuestionText",dangerouslySetInnerHTML:{__html:s&&s.text}}),m.a.createElement("div",{className:"QuestionOptions",style:{display:l>360?"flex":"block",flexWrap:"wrap"}},i&&i.length>0&&i.map((function(t){return m.a.createElement("div",{className:"OptionArea",style:{width:l<360?"".concat(l,"px"):"360px"}},m.a.createElement(f.a,{className:"checkbox",checked:t.value,onChange:function(a){return e.changeOption(a,t.label)},label:t.label}),m.a.createElement("span",{className:"textLabel"},t.label))})))),m.a.createElement("div",{className:"VideoArea"},m.a.createElement("div",{className:"Timer"},c?m.a.createElement(p.a,{durationTime:c,className:"timer-new",isPlaying:o,disableBtn:r,nextBtn:!0,handleTimer:this.handleTimer,remainingTimeHandler:this.remainingTimeHandler,onTick:function(t,a){e.handleTimeUpdate(t,a)}}):null),m.a.createElement("div",{className:"VideoRecord"}," ",m.a.createElement(k.default,{handleStartCaptureClick:this.handleStartCaptureClick,handleDataAvailable:this.handleDataAvailable,handleStopCaptureClick:this.handleStopCaptureClick,capturing:this.state.capturing,webcamRef:this.webcamRef,recordedChunks:this.state.recordedChunks,handleDownload:this.handleDownload}),m.a.createElement("div",{className:"audioDiv"},m.a.createElement("div",{className:"audio-img"},m.a.createElement("img",{src:I.a})," "),this.state.audioNew?m.a.createElement("div",{className:"audio-analyser"},m.a.createElement(E.a,{amplitude:function(){return null},audio:this.state.audioNew})):null)),m.a.createElement("div",{className:"NextBtn"},m.a.createElement(b.a,{disabled:a,variant:"contained",className:"Button-next ".concat(a?"disabled":"normal"),onClick:this.handleTimer},m.a.createElement("span",null,"Next Question"),m.a.createElement("span",null,m.a.createElement(w.a,{style:{height:"15px",width:"15px"}})))))))}}]),a}(d.Component);t.default=Object(g.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(v.b)(h,e)}}))(U)},210:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(9),i=a.n(s),r=a(80),o=a(46),c=a(47),l=a(91),u=a(64),d=a(63),m=a(0),p=a.n(m),h=a(27),v=(a(198),a(199)),g=a(15),f=a(28),b=a(13),S=a(33),w=(a(32),a(23)),k=a(92),E=a(200),y=a(282),I=(a(274),a(259)),N=a.n(I);function R(e){var t=Math.floor(e/3600);e%=3600;var a=Math.floor(e/60),n=Math.floor(e%60);return t<10&&0!=t&&(t="0".concat(t)),0==t&&(t="00"),a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),t+":"+a+":"+n}var C=a(236),T=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Verbal Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(y.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(y.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:N.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : Verbal"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",R(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(C.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var D=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(T),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Verbal Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(y.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(y.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:N.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : MCQ"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",R(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(C.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var q=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(O),x=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={count:0,totalTime:"",responseId:localStorage.getItem("responseId")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({count:this.props.totalCount,totalTime:this.props.duration}),this.state.responseIdresponseId&&this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Coding Introduction Page"},timestamp:(new Date).toISOString()}})}},{key:"render",value:function(){return p.a.createElement("div",{className:"instruction-main-div"},p.a.createElement("div",{className:"main-wrapper"},p.a.createElement("div",{className:"left-content"},p.a.createElement("div",{className:"instructions-heading"},p.a.createElement(y.a,null,"Instructions")),p.a.createElement("div",{className:"instructions-subHeading"},p.a.createElement(y.a,null,"Read and follow the given Instructions"))),p.a.createElement("div",{className:"right-content"},p.a.createElement("div",{className:"instructions-logo"},p.a.createElement("img",{alt:"",src:N.a})))),p.a.createElement("div",{className:"page-content"},p.a.createElement("div",{className:"contents-verbal"},p.a.createElement("div",null,p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Question Type : Coding"),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"}),"Total No. of Questions :"," ",this.state.count),p.a.createElement("div",{className:"li-2"},p.a.createElement("div",{className:"dot"})," Total Time :"," ",R(this.state.totalTime))))),p.a.createElement("div",{className:"continue-button-wrapper"},p.a.createElement(C.a,{className:"continue-button",onClick:this.props.continue},"Continue")))}}]),a}(m.Component);var A=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(x),Q=a(711),U=a(268),j=a.n(U),P=(a(668),a(662)),H=a(203),M=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,L=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,M.open("elephantFiles",2));L.onsuccess=function(e){e.target.result.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}},L.onupgradeneeded=function(e){e.target.result.createObjectStore("videoAnswers",{keyPath:"questionId"})};var F=3,B=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={submitClicked:!1,submittedQuestions:[],totalQuestions:0,progress:0,submissionInProgress:!1,submissionQueue:[],currentQuestion:"",data:null,totalMcq:0,totalVerbal:0,totalCoding:0,mcqQuestions:[],sequenceOrder:"",verbalQuestions:[],verbalNew:!1,mcqNew:!1,codingNew:!1,suggestedVerbalDuration:0,suggestedCodingDuration:0,showDialog:!1,order:[]},e.submitClickedHandler=function(){e.setState({submitClicked:!0,progress:0})},e.totalQuestionsHandler=function(t){e.setState({totalQuestions:t})},e.addToQueue=function(t,a){var n=e.state.submissionQueue;n.push(t),e.setState({submissionQueue:n,currentQuestion:a.quesNo}),e.callSubmitApi()},e.callSubmitApi=function(){var t=Object(l.a)(e),a=e.state.submissionQueue;if(a.length>0&&0==e.state.submissionInProgress){e.setState({submissionInProgress:!0});var n=a.shift();t.setState({submissionQueue:a}),F-=1;var s=n.formdata,o=n.payload;localStorage.setItem("questionId",n.payload.questionId),localStorage.setItem("questionStatus",n.payload.questionStatus),localStorage.setItem("type",n.payload.type);var c=new XMLHttpRequest;c.timeout=6e5,c.upload.addEventListener("progress",(function(e){var a=e.loaded/e.total*100;t.props.UserAction.addsingleanswerProgress({progress:a})}),!1),c.addEventListener("load",function(){var e=Object(r.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!=a.target.status){e.next=4;break}t.props.UserAction.addsingleanswerSuccess(JSON.parse(a.target.responseText)),e.next=14;break;case 4:if(!F){e.next=12;break}return(s=t.state.submissionQueue).unshift(n),e.next=9,t.setState({submissionQueue:s,submissionInProgress:!1,showDialog:!0});case 9:t.callSubmitApi(),e.next=14;break;case 12:t.props.UserAction.addsingleanswerError({singleAnswerError:!0}),setTimeout((function(){t.setState({showDialog:!1})}),2e3);case 14:t.setState({progress:0}),t.callSubmitApi();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),c.addEventListener("error",function(){var e=Object(r.a)(i.a.mark((function e(a){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F){e.next=8;break}return(s=t.state.submissionQueue).unshift(n),e.next=5,t.setState({submissionQueue:s,submissionInProgress:!1,showDialog:!0});case 5:t.callSubmitApi(),e.next=10;break;case 8:t.props.UserAction.addsingleanswerError({singleAnswerError:!0}),setTimeout((function(){t.setState({showDialog:!1})}),2e3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),c.addEventListener("abort",(function(e){}),!1),c.open("PATCH","".concat(w.a,"/response/submission?responseId=").concat(o.responseId,"&questionId=").concat(o.questionId,"&questionStatus=").concat(o.questionStatus,"&type=").concat(o.type)),c.setRequestHeader("Authorization",localStorage.getItem("tokenNew")),c.send(s)}else e.setState({submissionInProgress:!1})},e.upload=function(){var t=Object(r.a)(i.a.mark((function t(a,n,s,r,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("insideee upload"),e.addToQueue({formdata:a,payload:n},{no:r,type:o}),e.decreaseCountHandler(o),M.open("elephantFiles",2).onsuccess=function(e){var t=e.target.result;t.transaction(["videoAnswers"],"readwrite").objectStore("videoAnswers",{keyPath:"questionId"}).add(s),t.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}};case 5:case"end":return t.stop()}}),t)})));return function(e,a,n,s,i){return t.apply(this,arguments)}}(),e.changeSequence=function(t){var a=e.state.order,n=a&&a.length>0&&a.findIndex((function(e){return e===t}));-1===n&&n===a.length-1||setTimeout((function(){e.setState({sequenceOrder:a[n+1]})}),2e3)},e.decreaseCountHandler=function(t){"verbal"===t?e.setState({totalVerbal:e.state.totalVerbal-1}):"coding"===t?e.setState({totalCoding:e.state.totalCoding-1}):e.setState({totalMcq:e.state.totalMcq-1})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},window.addEventListener("beforeunload",this.keepOnPage),k.a.pageview(window.location.pathname);var e=this.props.history&&this.props.history.location&&this.props.history.location.state,t=e&&e.totalMcq,a=e&&e.totalVerbal,s=e&&e.totalCoding,i=e&&e.data&&e.data.newResponse,r=0,o=0,c=0,l=0,u=0,d=0;if(e){var m=(e&&e.data).response,p=e.verbalQuestions,h=e.mcqQuestions,v=e.codingQuestions;r=m&&m.verbalQuestions&&m.verbalQuestions.length,o=m&&m.mcqQuestions&&m.mcqQuestions.length,c=m&&m.codingQuestions&&m.codingQuestions.length,p&&p.length>0&&p.map((function(e){l+=e.suggestedDuration})),h&&h.length>0&&h.map((function(e){d+=e.suggestedDuration})),v&&v.length>0&&v.map((function(e){u+=e.suggestedDuration}))}this.setState(Object(n.a)(Object(n.a)({},e),{},{totalQuestions:t+a+s,verbalNew:!!i||r===a,mcqNew:!!i||o===t,codingNew:!!i||c===s,suggestedMcqDuration:d,suggestedVerbalDuration:l,suggestedCodingDuration:u,order:e&&e.order}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.keepOnPage)}},{key:"keepOnPage",value:function(e){var t="Warning!\n\nNavigating away from this page will clear your response.";return e.returnValue=t,t}},{key:"render",value:function(){var e=this,t=this.state,a=t.sequenceOrder,n=t.totalMcq,s=t.totalVerbal,i=t.totalCoding,r=t.submitClicked,o=(t.totalQuestions,t.submittedQuestions,t.progress,t.verbalNew),c=t.mcqNew,l=t.codingNew,u=t.suggestedMcqDuration,d=t.suggestedVerbalDuration,m=t.suggestedCodingDuration;t.order;return p.a.createElement("div",{className:"main-parent"},p.a.createElement(Q.a,{className:"warning-dialog-submit",open:this.state.showDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement("div",{className:"warning-dialog-main"},p.a.createElement("div",{className:"unstable-image"},p.a.createElement("img",{src:j.a})),p.a.createElement("div",{className:"warning-dialog-heading"},"Failed to submit response, Being retried"))),r&&n<1&&s<1&&i<1?p.a.createElement(v.default,{progress:this.state.progress,submittedQuestions:this.state.submittedQuestions,totalQuestions:this.state.totalQuestions,responseId:this.state&&this.state.data&&this.state.data.response&&this.state.data.response.id}):o&&"verbal"===a&&s>0?p.a.createElement(D,{totalCount:s,duration:d,continue:function(){return e.setState({verbalNew:!1})}}):"verbal"===a&&s>0?p.a.createElement(h.e,{submitClickedHandler:function(){return 0===n&&0===i?e.submitClickedHandler():e.changeSequence("verbal")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,decreaseCountHandler:function(){return e.decreaseCountHandler("verbal")},data:this.state,upload:this.upload}):l&&"coding"===a&&i>0?p.a.createElement(A,{totalCount:i,duration:m,continue:function(){return e.setState({codingNew:!1})}}):"coding"===a&&i>0?p.a.createElement(H.default,{submitClickedHandler:function(){return 0===s&&0===n?e.submitClickedHandler():e.changeSequence("coding")},decreaseCountHandler:function(){return e.decreaseCountHandler("coding")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,data:this.state,upload:this.upload}):c&&"mcq"===a&&n>0?p.a.createElement(q,{totalCount:n,duration:u,continue:function(){return e.setState({mcqNew:!1})}}):"mcq"===a&&n>0?p.a.createElement(E.default,{submitClickedHandler:function(){return 0==s&&0===i?e.submitClickedHandler():e.changeSequence("mcq")},decreaseCountHandler:function(){return e.decreaseCountHandler("mcq")},addToQueue:this.addToQueue,totalQuestionsHandler:this.totalQuestionsHandler,callSubmitApi:this.callSubmitApi,data:this.state,upload:this.upload}):p.a.createElement("div",{style:{padding:"20px 0",display:"flex",justifyContent:"center"}},p.a.createElement(P.a,{style:{color:"#04724D"}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e&&e.UserReducer&&e.UserReducer.singleAnswerProgress&&!e.UserReducer.isUserquestionDataAdded&&(t.progress=e.UserReducer.singleAnswerProgress),e&&e.UserReducer&&e.UserReducer.isUserquestionDataAdded&&e.UserReducer.singleAnswerData){console.log("singleee answer data",e.UserReducer.singleAnswerData),e.UserReducer.isUserquestionDataAdded=!1,F=3,t.showDialog=!1,e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"api",level:1,metadata:{detail:{questionId:localStorage.getItem("questionId"),status:localStorage.getItem("questionStatus"),type:localStorage.getItem("type")},type:"success"},timestamp:(new Date).toISOString()}}),M.open("elephantFiles",1).onsuccess=function(e){var t=e.target.result;t.transaction(["videoAnswers"],"readwrite").objectStore("videoAnswers",{keyPath:"questionId"}).delete("".concat(localStorage.getItem("questionId"))),t.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}};var a=t.submittedQuestions;if(a.push(t.currentQuestion),t.submittedQuestions=a,t.submittedQuestions.length<t.totalQuestions&&(t.progress=0),t.submittedQuestions.length==t.totalQuestions){var n={responseId:t.data&&t.data.response&&t.data.response.id,formdata:{status:"FINISHED"}};e.UserAction.updateResponse(n),e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"debug",level:3,metadata:{Page:"Congratulation"},timestamp:(new Date).toISOString()}}),setTimeout((function(){e.history.push({pathname:"/congratulation"})}),200)}}return e&&e.UserReducer&&e.UserReducer.singleAnswerError&&(e.UserReducer.singleAnswerError=!1,e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,isError:!0,event:{type:"api",level:1,metadata:{detail:{questionId:localStorage.getItem("questionId"),status:localStorage.getItem("questionStatus"),type:localStorage.getItem("type")},type:"error",response:e.UserReducer.singleAnswerError},timestamp:(new Date).toISOString()}}),setTimeout((function(){e.UserAction.addEvent({responseId:t&&t.data&&t.data.response&&t.data.response.id,event:{type:"debug",level:3,metadata:{Page:"Error Page"},timestamp:(new Date).toISOString()}}),e.history.push({pathname:"/error"})}),2e3)),t}}]),a}(p.a.Component);t.default=Object(S.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(f.b)(b,e)}}))(Object(g.e)(B))},259:function(e,t,a){e.exports=a.p+"static/media/login_page_logo.d598eaad.png"},260:function(e,t,a){},268:function(e,t,a){e.exports=a.p+"static/media/warning.a736dff5.svg"},269:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){e.exports=a.p+"static/media/Submitting.baee2f23.svg"},273:function(e,t,a){},274:function(e,t,a){},668:function(e,t,a){}}]);
//# sourceMappingURL=6.fc464a1a.chunk.js.map