(this["webpackJsonpadmin-hire-tool-frontend"]=this["webpackJsonpadmin-hire-tool-frontend"]||[]).push([[9],{213:function(e,t,a){"use strict";a.r(t),a.d(t,"Preview",(function(){return J}));var s=a(8),n=a.n(s),i=a(80),o=a(46),r=a(47),c=a(64),l=a(63),d=a(0),u=a.n(d),m=a(283),p=a(15),h=a(33),v=a(237),f=(a(656),a(257)),g=a.n(f),w=a(660),b=a.n(w),A=a(661),y=a.n(A),E=a(662),S=a.n(E),x=a(135),N=a.n(x),k=a(254),C=a(242),I=a(657),D=a.n(I);function M(e){return u.a.createElement("div",null,u.a.createElement(C.a,{open:e.isShowModal,onClose:e.onCloseModal,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",onBackdropClick:e.onCloseModal,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0,style:{zIndex:200,position:"absolute",top:"10%",margin:"auto",overflow:"scroll",height:"100%",display:"flex",justifyContent:"center"}},u.a.createElement("div",{className:e.className?e.className:null},e.showClose&&u.a.createElement("div",{onClick:e.onCloseModal2,style:e.styleIcon?e.styleIcon:{position:"absolute",right:"10px",cursor:"pointer"}},e.icon?u.a.createElement("img",{src:e.icon,width:"20px",alt:""}):u.a.createElement(D.a,{style:{color:"#6B6C6F",fontSize:"large"}})),e.children)))}var O=a(12),P=a(28),U=a(32),j=a(251),R=a.n(j),F=a(663),B=a(713),T=a(269),z=a.n(T),L=a(658),V=a.n(L),W=a(92),q=a(252),Q=a(659),Y=a.n(Q),Z=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,_=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,Z.open("elephantFiles",2));_.onsuccess=function(e){e.target.result.onerror=function(e){console.log("Error creating/accessing IndexedDB database")}},_.onupgradeneeded=function(e){e.target.result.createObjectStore("videoAnswers",{keyPath:"questionId"})};var H=0,J=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).componentDidMount=Object(i.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props&&s.props.history&&s.props.history.location&&s.props.history.location.state,a=t.response,e.next=3,s.setState({responseId:a.id});case 3:return W.a.pageview(window.location.pathname),window.onbeforeunload=function(){return!0},e.next=7,navigator.mediaDevices.getUserMedia({audio:!0}).then(function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({audioAccess:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){s.setState({audioAccess:!1,isShowModal:!0}),s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"interview",event:"Preview check failed",message:"Audio Access not granted",timestamp:(new Date).toISOString()},isPreviewFail:!0})}));case 7:return e.next=9,navigator.mediaDevices.getUserMedia({video:s.state.video}).then((function(e){s.setState({videoAccess:!0})})).catch((function(){s.setState({videoAccess:!1,isShowModal:!0}),s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"interview",event:"Preview check failed",message:"Camera Access not granted",timestamp:(new Date).toISOString()},isPreviewFail:!0})}));case 9:return s.state.videoAccess||s.state.audioAccess?!s.state.videoAccess&&s.state.audioAccess?s.setState({source:"https://birbal.s3.ap-south-1.amazonaws.com/assets/allow_cam.mp4"}):s.state.videoAccess&&!s.state.audioAccess&&s.setState({source:"https://birbal.s3.ap-south-1.amazonaws.com/assets/allow_mic.mp4"}):s.setState({source:"https://birbal.s3.ap-south-1.amazonaws.com/assets/allow_both.mp4"}),e.next=12,s.getMicrophone();case 12:case"end":return e.stop()}}),e)}))),s.displaySpeed=function(){localStorage.getItem("uploadSpeed")&&localStorage.getItem("uploadSpeed")<1&&s.state.faces&&(s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"interview",event:"Preview check failed",message:"Internet not stable",timestamp:(new Date).toISOString(),internetSpeed:"".concat(localStorage.getItem("uploadSpeed"),"mbps")},isPreviewFail:!0}),s.setState({showDialog:!0}))},s.screenPopUpFromChild=function(){s.setState({showDialogScreen:!0})},s.handleScreenAccess=function(){s.childRef.current.getAccess();s.setState({showDialogScreen:!1})},s.onScreenAccess=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setState({screenAccess:!0});case 2:s.displaySpeed();case 3:case"end":return e.stop()}}),e)}))),s.capture=function(){var e,t=s.webcamRef&&s.webcamRef.current&&s.webcamRef.current.getScreenshot();e=t&&t.substring("data:image/jpeg;base64".length+1)?t.substring("data:image/jpeg;base64".length+1):"notfound",s.setState({screenShot:e}),s.props.UserAction.verifyScreenshot({base64:e})},s.handleInterview=function(){var e,t,a,n="",i=[],o=[],r=[],c=s.props&&s.props.history&&s.props.history.location&&s.props.history.location.state,l=c.response,d=c.questions,u=c.newResponse;console.log(l);var m=l.questionType,p=l.mcqQuestions,h=l.verbalQuestions,v=l.codingQuestions,f=l.status,g=m&&m.length>0&&m.map((function(e){return e.name&&e.name.toLowerCase()}));if(p&&p.length>0&&p.map((function(e){if(1===e.statusCode){var t=d&&d.length>0&&d.find((function(t){return e.id===t.id}));t&&o.push(t)}})),v&&v.length>0&&v.map((function(e){if(1===e.statusCode){var t=d&&d.length>0&&d.find((function(t){return e.id===t.id}));t&&r.push(t)}})),h&&h.length>0&&h.find((function(e){if(1===e.statusCode){var t=d&&d.length>0&&d.find((function(t){return e.id===t.id}));t&&i.push(t)}})),e=o.length,t=i.length,a=r.length,0===e&&g.includes("mcq")){var w=g.indexOf("mcq");-1!==w&&g.splice(w,1)}if(0===t&&g.includes("verbal")){var b=g.indexOf("verbal");-1!==b&&g.splice(b,1)}if(0===a&&g.includes("coding")){var A=g.indexOf("coding");-1!==A&&g.splice(A,1)}if((e>0&&t>0&&a>0||e>0&&t>0&&0===a||e>0&&0===t&&a>0||0===e&&t>0&&a>0)&&g&&g.length>1?(n=g&&g.length>0&&g[0],console.log(n,g)):e>0&&(0===t||0===a)?n="mcq":a>0&&(0===t||0===e)?n="coding":(0===e||0===a)&&t>0&&(n="verbal"),0===e&&0===t&&0===a){if("APPEARING"===f){console.log(":hhhh");var y={responseId:s.state.responseId,formdata:{status:"FINISHED"}};s.props.UserAction.updateResponse(y)}l&&s.state.responseId&&s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Congratulation"},timestamp:(new Date).toISOString()}}),s.props.history.push({pathname:"/congratulation"}),localStorage.setItem("preview",!0)}else navigator.mediaDevices.getUserMedia({video:s.state.video,audio:s.state.audio}).then((function(c){s.setState({alert:!1,enter:!0}),setTimeout((function(){l&&s.state.responseId&&s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"debug",level:3,metadata:{Page:"Start Interview"},timestamp:(new Date).toISOString()}}),s.props.UserAction.addEvent({responseId:s.state.responseId,event:{type:"interview",event:"Preview check passed",timestamp:(new Date).toISOString()},isPreviewFail:!1}),s.props.history.push({pathname:"/interview-process",state:{data:{response:l,questions:d,newResponse:u},totalMcq:e,totalVerbal:t,totalCoding:a,sequenceOrder:n,verbalQuestions:i,mcqQuestions:o,codingQuestions:r,order:g}})}),1e3),localStorage.setItem("preview",!0)})).catch((function(){s.setState({alert:!0})}))},s.toggleMicrophone=function(){s.state.audioNew?s.stopMicrophone():s.getMicrophone()},s.onUserStop=function(){s.setState({screenAccess:!1,showDialog:!1})},s.amplitudeEvent=function(e){H=e,1!==e&&2!==e||"Please check your microphone, you voice is very low"===s.state.voiceMessage||s.setState({voiceMessage:"Please check your microphone, you voice is very low"}),3!==e&&4!==e||s.handleCloseAudioPopup()},s.handleCloseAudioPopup=function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){console.log("MediaStreamTrack muted:",e.getAudioTracks()[0].muted),e.getAudioTracks()[0].muted||(s.setState({audioPopup:!1}),s.capture())})).catch((function(e){return console.log(e)}))},s.state={alert:!1,enter:!1,audio:!1,video:!0,audioAccess:!1,videoAccess:!1,screenAccess:!1,audioNew:null,isShowModal:!1,screenShot:null,faces:0,speedInMbps:0,showDialog:!1,source:"",responseId:"",showDialogScreen:!1,audioPopup:!1,voiceMessage:""},s.videoTag=u.a.createRef(),s.webcamRef=u.a.createRef(),s.childRef=u.a.createRef(),s}return Object(r.a)(a,[{key:"componentDidUnmount",value:function(){window.onbeforeunload=null}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var a,s,i=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t&&t.UserReducer,s=this.props&&this.props.UserReducer,a.isScreenShotDataArrived===s.isScreenShotDataArrived||!s.screenShot||!s.screenShot.data){e.next=7;break}return s.isScreenShotDataArrived=!1,e.next=6,this.setState({faces:s.screenShot.data.faces?s.screenShot.data.faces:0});case 6:s.screenShot.data.faces?/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)?this.childRef.current.getAccess():this.setState({showDialogScreen:!0}):(this.props.UserAction.addEvent({responseId:this.state.responseId,event:{type:"interview",event:"Preview check failed",message:"No Face Detected",timestamp:(new Date).toISOString()},isPreviewFail:!0}),U.store.addNotification({title:"",message:"Please Make Sure Your Face is visible and there is proper lighting!",type:"warning",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2500}}),setTimeout((function(){i.capture()}),2500));case 7:s.screenshotError&&(s.screenshotError=!1,setTimeout((function(){i.capture()}),5e3));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMicrophone",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.next=5,this.setState({audioNew:t});case 5:this.setState({audioPopup:!0}),setTimeout((function(){H||a.setState({voiceMessage:"Please check your microphone, not able to listen to your voice"})}),2e3);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopMicrophone",value:function(){this.state.audioNew.getTracks().forEach((function(e){return e.stop()})),this.setState({audioNew:null})}},{key:"render",value:function(){var e=this;return localStorage.getItem("login")?u.a.createElement("div",{className:"preview-main-div"},u.a.createElement(q.a,{ref:this.childRef,onScreenAccess:this.onScreenAccess,onUserStop:this.onUserStop,screenPopUpFromChild:this.screenPopUpFromChild}),u.a.createElement(B.a,{className:"dialog-box",open:this.state.showDialog,onClose:function(){e.setState({showDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.a.createElement("div",{className:"dialog-wrapper"},u.a.createElement("div",{className:"left-div"},u.a.createElement("div",{className:"unstable-image"},u.a.createElement("img",{src:z.a})),u.a.createElement("div",{className:"unstable-text-1"},"Your internet connection is unstable"),u.a.createElement("div",{className:"unstable-text-2"},"Something is temporarily wrong with your internet connection")),u.a.createElement("div",{className:"right-div"},u.a.createElement("div",{onClick:this.handleInterview,className:"Modal-div"},"Continue Anyway ",u.a.createElement(V.a,{style:{color:"#fff"}}))))),u.a.createElement(B.a,{className:"dialog-box",open:this.state.showDialogScreen,onClose:function(){e.setState({showDialogScreen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.a.createElement("div",{className:"dialog-wrapper"},u.a.createElement("div",{className:"left-div"},u.a.createElement("div",{className:"unstable-text-1"},"Please Click on button to provide access")),u.a.createElement("div",{className:"right-div"},u.a.createElement("div",{onClick:this.handleScreenAccess,className:"Modal-div"},"Screen Access")))),this.state.isShowModal?u.a.createElement(M,{isShowModal:this.state.isShowModal,onCloseModal2:function(){e.setState({isShowModal:!1})},showClose:!0,className:"FirstModal"},u.a.createElement("div",{className:"FirstModal-main"},window.screen.width>=1024?u.a.createElement("video",{controls:!0,autoPlay:!0},this.state.source?u.a.createElement("source",{src:this.state.source,type:"video/mp4"}):null):null,u.a.createElement("div",{className:"message"},"Please Allow",this.state.videoAccess||this.state.audioAccess?!this.state.videoAccess&&this.state.audioAccess?" Camera/Webcam ":this.state.videoAccess&&!this.state.audioAccess?" Microphone ":null:" Microphone and Camera/Webcam ","Settings"))):null,this.state.audioPopup?u.a.createElement(M,{isShowModal:this.state.audioPopup,showClose:!1,className:"SecondModal"},u.a.createElement("div",{className:"modal-body"},u.a.createElement("div",{className:"mic-icon-div"},u.a.createElement(Y.a,null)),u.a.createElement("div",{className:"audio-anayliser-div"},this.state.audioNew&&this.state.audioAccess?u.a.createElement(k.a,{amplitude:this.amplitudeEvent,audio:this.state.audioNew}):null),u.a.createElement("div",{className:"speak"},"Please Speak Your Name"),u.a.createElement("div",{className:"button-msg-wrapper"},1===H||2===H?u.a.createElement("div",{className:"Modal-div",onClick:function(){e.handleCloseAudioPopup()}},"Continue Anyway ",u.a.createElement(V.a,{style:{color:"#fff"}})):null,u.a.createElement("div",{className:"voice-message"},this.state.voiceMessage)))):null,u.a.createElement("div",{className:"previews-heading"},window.screen.width>1024?u.a.createElement(m.a,null,"Preview"):null),u.a.createElement("div",{className:"previews-subHeading1"},window.screen.width>1024?u.a.createElement(m.a,null,"Check all connections before starting"):null),u.a.createElement("div",{className:"page-content-preview "},u.a.createElement("div",{className:"row-wrapper"},u.a.createElement("div",{className:"left-div-new"},u.a.createElement("div",{className:"video-div-preview"},u.a.createElement("div",{className:"interview-video"},u.a.createElement(g.a,{muted:!0,audio:this.state.audio,ref:this.webcamRef,videoConstraints:{facingMode:"user"},autoPlay:!0,screenshotFormat:"image/jpeg"}))),u.a.createElement("div",{className:"second-wrapper"},u.a.createElement("div",{className:"birbal-logo-preview2"},u.a.createElement("img",{style:{maxWidth:"100px"},src:N.a})),u.a.createElement("div",{className:"turn-on-2"},"Please turn on the Video and mic before starting the interview."),u.a.createElement("div",{className:"main-flex"},u.a.createElement("div",{style:{display:"flex"},className:"tick-div"},u.a.createElement("div",{className:"flex-div-preview"},this.state.audioAccess?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{style:{backgroundColor:"#F11A1A"},className:"icon-box"}," ",u.a.createElement(y.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}}))," ",u.a.createElement("div",{className:"access-text"}," Audio Access")),u.a.createElement("div",{className:"flex-div-preview"},this.state.videoAccess?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{style:{backgroundColor:"#F11A1A"},className:"icon-box"}," ",u.a.createElement(y.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}}))," ",u.a.createElement("div",{className:"access-text"},"Video Access")),u.a.createElement("div",{className:"only-tab-div flex-div-preview"},this.state.faces?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{style:{backgroundColor:"#F11A1A"},className:"icon-box"}," ",u.a.createElement(y.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}}))," ",u.a.createElement("div",{className:"access-text"},"Lighting Conditions")),u.a.createElement("div",{className:"only-tab-div flex-div-preview"},localStorage.getItem("uploadSpeed")&&localStorage.getItem("uploadSpeed")>1?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{className:"icon-box"},u.a.createElement(S.a,{style:{font:"bold",height:"100%",width:"100%"}})," ")," ",u.a.createElement("div",{className:"access-text"},"Internet Speed")),u.a.createElement("div",{className:"only-tab-div flex-div-preview"},this.state.screenAccess?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{style:{backgroundColor:"#F11A1A"},className:"icon-box"}," ",u.a.createElement(y.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}}))," ",u.a.createElement("div",{className:"access-text"},"Screen Access"))),this.state.audioNew&&this.state.audioAccess?u.a.createElement("div",{className:"audio-bar"},u.a.createElement("div",{className:"flex-div-preview-2"},u.a.createElement("div",{className:"div-1"}," ",u.a.createElement("img",{src:R.a})," "),u.a.createElement("div",{style:{height:"20px"},className:"div-2"}," ",u.a.createElement(k.a,{amplitude:function(){return null},audio:this.state.audioNew})," "))):null),u.a.createElement("div",{className:"main-flex-new"},u.a.createElement("div",{style:{display:"flex"},className:"tick-div-new"},u.a.createElement("div",{className:"flex-div-preview"},this.state.faces?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{style:{backgroundColor:"#F11A1A"},className:"icon-box"}," ",u.a.createElement(y.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}}))," ",u.a.createElement("div",{className:"access-text"},"Lighting Conditions")),u.a.createElement("div",{className:"flex-div-preview"},localStorage.getItem("uploadSpeed")&&localStorage.getItem("uploadSpeed")>1?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{className:"icon-box"},u.a.createElement(S.a,{style:{font:"bold",height:"100%",width:"100%"}})," ")," ",u.a.createElement("div",{className:"access-text"},"Internet Speed")),u.a.createElement("div",{className:"flex-div-preview"},this.state.screenAccess?u.a.createElement("div",{style:{backgroundColor:"#04724D"},className:"icon-box"},u.a.createElement(b.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}})):u.a.createElement("div",{style:{backgroundColor:"#F11A1A"},className:"icon-box"}," ",u.a.createElement(y.a,{style:{color:"#fff",font:"bold",height:"15px",width:"15px"}}))," ",u.a.createElement("div",{className:"access-text"},"Screen Access")))),this.state.audioNew&&this.state.audioAccess?u.a.createElement("div",{className:"audio-bar-2"},u.a.createElement("div",{className:"flex-div-preview-2"},u.a.createElement("div",{className:"div-1"}," ",u.a.createElement("img",{src:R.a})," "),u.a.createElement("div",{style:{height:"20px"},className:"div-2"}," ",u.a.createElement(k.a,{amplitude:function(){return null},audio:this.state.audioNew})," "))):null,u.a.createElement("div",{className:"only-mobile-button"},this.state.videoAccess&&this.state.audioAccess&&this.state.screenAccess&&this.state.faces?u.a.createElement(v.a,{className:"startInterviewButton",variant:"contained",onClick:this.handleInterview,style:{marginTop:"30px",backgroundColor:"#04724D",color:"white",borderRadius:"4px",textTransform:"none",fontSize:"13px",fontWeight:"500",whiteSpace:"nowrap",width:"100%"}},"Start Interview"):u.a.createElement("div",{style:{padding:"20px 0"}},u.a.createElement(F.a,{style:{color:"#04724D"}}))))),u.a.createElement("div",{className:"preview-start previews-subHeading right-div-new"},u.a.createElement(m.a,null,"Please turn on the Video and mic before starting the interview."),this.state.videoAccess&&this.state.audioAccess&&this.state.faces&&this.state.screenAccess?u.a.createElement(v.a,{className:"startInterviewButton",variant:"contained",onClick:this.handleInterview,style:{marginTop:"30px",backgroundColor:"#04724D",color:"white",borderRadius:"20px",padding:"12px 60px",textTransform:"none",fontSize:"22px",fontWeight:"600",whiteSpace:"nowrap"}},"Start Interview"):u.a.createElement("div",{style:{padding:"20px 0"}},u.a.createElement(F.a,{style:{color:"#04724D"}}))))),u.a.createElement("div",{style:{display:"flex",justifyContent:"end",marginRight:"30px"},className:"birbal-logo-preview"},u.a.createElement("img",{style:{maxWidth:"100px"},src:N.a}))):u.a.createElement("div",null," Access Blocked")}}]),a}(d.Component);t.default=Object(h.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(P.b)(O,e)}}))(Object(p.e)(J))},251:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAeQAAAHkBOLWIEgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFZSURBVDiNnZJBSwJBFMffzOyaoW2LBiIpspgEXuobZBcvXTp06hN4DWKvy95C+gB+iI518ZIdukZdhJCYJEPCjDWVFdaZ6bTbsO6h9p3m/d///f7wGCSEALmOc5n7nVTyVGDENZYYWZQu/JlZLlaaL2892Y8hVFPGc8gjm4P5ojX03DNfPy+Vqg+T6U3YHwDsQ6TIAwFAAAPxe8S5IiICA6HzpPXCQwAAe3d7yzQK+7JmGvmDFcCc8XQUYOiyxuvCvZC1ztfsKgDYhqFHLf6lbMPQcdsZd+MC2s64iz0u1LgAjwt15ar/Laxi5MVdVjHycF3PVuMC6nq2ii1KnbgAi1In+H0pgmdRpvw6aWlEuRbLX62WSZ/47+CItb3vSmTK8/tnkw4eZa1Jh3crAOtWzgBAAAw4ML8XGC8RAA8HKGFhg+APobJJYS3Z0Fhi5OuX/X7XLBePwv4flUNx5gxqBEIAAAAASUVORK5CYII="},252:function(e,t,a){"use strict";var s=a(8),n=a.n(s),i=a(80),o=a(55),r=a(0),c=a.n(r),l=a(33),d=a(28),u=a(12),m=a(32),p=Object(r.forwardRef)((function(e,t){var a=c.a.useState(!1),s=Object(o.a)(a,2),l=s[0],d=s[1],u=c.a.useRef(null),p=c.a.useState(!1),h=Object(o.a)(p,2),v=h[0],f=h[1],g=c.a.useState(!1),w=Object(o.a)(g,2),b=w[0],A=w[1],y=c.a.useState(!1),E=Object(o.a)(y,2),S=E[0],x=E[1],N=c.a.useState([]),k=Object(o.a)(N,2),C=k[0],I=k[1],D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),M=e.UserReducer,O=M.capturingNew,P=M.abortNew,U=M.accessNew,j=M.screenRecordedFile,R=M.streamNew;Object(r.useEffect)((function(){console.log(U),d(O),A(U),f(P),R&&x(R)}),[O,P,U,j]),Object(r.useImperativeHandle)(t,(function(){return{getAccess:function(){F()},startCapture:function(){b&&T()},stopCapture:function(){l&&L()},abortCapture:function(){l&&V()},closeAccess:function(){b&&W()}}}));var F=c.a.useCallback(Object(i.a)(n.a.mark((function t(){var a,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen",frameRate:5,height:720,videoBitsPerSecond:625e3}});case 2:return a=t.sent,t.next=5,a.getVideoTracks()[0];case 5:return s=t.sent,t.next=8,s.getSettings();case 8:i=t.sent,a&&i&&i.displaySurface&&"monitor"===i.displaySurface.toLowerCase()||s&&"Primary Monitor"===s.label?(x(a),A(!0),e.UserAction.addStream(a),e.UserAction.getAccess(),e.onScreenAccess()):(A(!1),e.UserAction.closeAccess(),m.store.addNotification({title:"Error",message:"You need to provide Entire Screen Access to Continue",type:"danger",container:"top-center",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3}}),setTimeout((function(){e.screenPopUpFromChild()}),3e3)),a.getVideoTracks()[0].onended=function(){B()};case 11:case"end":return t.stop()}}),t)}))),[b,S,A,x]),B=c.a.useCallback((function(){f(!0),d(!1),A(!1),e.UserAction.abortCapture(!0),e.UserAction.stopCapture(),e.UserAction.closeAccess(),e.onUserStop(),I([])}),[b,A,u,d,f]),T=c.a.useCallback((function(){u.current=new MediaRecorder(S,{mimeType:D?'video/mp4; codecs="avc1.42E01E, mp4a.40.2"':"video/webm"}),u.current.start(),console.log(u.current),e.onRecordStart(),d(!0),f(!1),e.UserAction.startCapture(),e.UserAction.abortCapture(!1),u.current.addEventListener("dataavailable",z)}),[b,S,d,f,u]),z=c.a.useCallback((function(e){var t=e.data;console.log("data",t),t.size>0&&(console.log("data availbale"),I((function(e){return e.concat(t)})))}),[I]),L=c.a.useCallback((function(){u.current.stop(),e.onRecordStop(),d(!1),e.UserAction.stopCapture()}),[u,d]),V=c.a.useCallback((function(){f(!0),d(!1),e.UserAction.abortCapture(!0),e.UserAction.stopCapture(),u.current.stop(),e.onRecordStop(),I([]),e.onAbort()}),[u,d,f]),W=c.a.useCallback((function(){S.getTracks().forEach((function(e){console.log(e),"live"==e.readyState&&e.stop()})),console.log("inside2")}),[S,b]),q=function(){console.log("inside3"),f(!1),d(!1),I([]),e.UserAction.stopCapture(),e.UserAction.abortCapture(!1)};if(console.log("recorded",C.length,l,v,b),C.length>0&&0==l&&0==v){var Q=new Blob(C,{type:"video/webm"});e.onVideoFile(Q),q()}else C.length>0&&0==l&&1==v&&q();return c.a.createElement("div",null)}));t.a=Object(l.b)((function(e){return{UserReducer:e.UserReducer}}),(function(e){return{UserAction:Object(d.b)(u,e)}}),null,{forwardRef:!0})(p)},254:function(e,t,a){"use strict";var s=a(46),n=a(47),i=a(91),o=a(64),r=a(63),c=a(0),l=a.n(c),d=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).canvas=l.a.createRef(),n.bar=l.a.createRef(),n}return Object(n.a)(a,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){for(var e=this.props,t=e.audioData,a=e.bufferLength,s=0,n=0;n<a;n++)s+=10*Math.abs(128-t[n]);this.average=s/a,this.progressWidth={width:30*Math.log(this.average)-40,backgroundColor:"rgba(".concat(30*Math.log(this.average),",").concat(255-30*Math.log(this.average),", 0)")},this.progressWidth.width>100?this.props.amplitude(4):this.progressWidth.width>70?this.props.amplitude(3):this.progressWidth.width>40&&this.props.amplitude(2),this.progressWidth.width>0&&this.props.amplitude(1)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"volume",style:this.progressWidth}))}}]),a}(c.Component),u=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={audioData:new Uint8Array(0)},n.tick=n.tick.bind(Object(i.a)(n)),n.count=0,n.level="NA",n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=128,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.rafId=requestAnimationFrame(this.tick)}},{key:"tick",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.count+=1,this.count%20==0&&(this.count=0,this.setState({audioData:this.dataArray})),this.rafId=requestAnimationFrame(this.tick)}},{key:"amplitude",value:function(e){this.level!=e&&(this.level=e,this.props.amplitude(e))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rafId),this.analyser.disconnect(),this.source.disconnect()}},{key:"render",value:function(){var e=this;return l.a.createElement(d,{audioData:this.state.audioData,bufferLength:this.bufferLength,amplitude:function(t){return e.amplitude(t)}})}}]),a}(c.Component);t.a=u},269:function(e,t,a){e.exports=a.p+"static/media/warning.a736dff5.svg"},656:function(e,t,a){},657:function(e,t,a){"use strict";var s=a(86),n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),o=(0,s(a(88)).default)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=o},658:function(e,t,a){"use strict";var s=a(86),n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),o=(0,s(a(88)).default)(i.createElement("path",{d:"M10 17l5-5-5-5v10z"}),"ArrowRight");t.default=o},659:function(e,t,a){"use strict";var s=a(86),n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),o=(0,s(a(88)).default)(i.createElement("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"Mic");t.default=o},660:function(e,t,a){"use strict";var s=a(86),n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),o=(0,s(a(88)).default)(i.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.default=o},661:function(e,t,a){"use strict";var s=a(86),n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),o=(0,s(a(88)).default)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.default=o},662:function(e,t,a){"use strict";var s=a(86),n=a(87);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),o=(0,s(a(88)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.default=o},663:function(e,t,a){"use strict";var s=a(1),n=a(7),i=a(0),o=(a(9),a(11)),r=a(16),c=a(31),l=i.forwardRef((function(e,t){var a=e.classes,r=e.className,l=e.color,d=void 0===l?"primary":l,u=e.disableShrink,m=void 0!==u&&u,p=e.size,h=void 0===p?40:p,v=e.style,f=e.thickness,g=void 0===f?3.6:f,w=e.value,b=void 0===w?0:w,A=e.variant,y=void 0===A?"indeterminate":A,E=Object(n.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),S={},x={},N={};if("determinate"===y||"static"===y){var k=2*Math.PI*((44-g)/2);S.strokeDasharray=k.toFixed(3),N["aria-valuenow"]=Math.round(b),S.strokeDashoffset="".concat(((100-b)/100*k).toFixed(3),"px"),x.transform="rotate(-90deg)"}return i.createElement("div",Object(s.a)({className:Object(o.a)(a.root,r,"inherit"!==d&&a["color".concat(Object(c.a)(d))],{determinate:a.determinate,indeterminate:a.indeterminate,static:a.static}[y]),style:Object(s.a)({width:h,height:h},x,v),ref:t,role:"progressbar"},N,E),i.createElement("svg",{className:a.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},i.createElement("circle",{className:Object(o.a)(a.circle,m&&a.circleDisableShrink,{determinate:a.circleDeterminate,indeterminate:a.circleIndeterminate,static:a.circleStatic}[y]),style:S,cx:44,cy:44,r:(44-g)/2,fill:"none",strokeWidth:g})))}));t.a=Object(r.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(l)}}]);
//# sourceMappingURL=9.431b37df.chunk.js.map